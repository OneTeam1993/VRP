(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{ZEpu:function(l,n,u){"use strict";u.r(n);var t=u("CcnG"),e=function(){return function(){}}(),a=u("pMnS"),s=u("jvCn"),r=u("miAi"),i=u("mrSG"),o=u("wd/R"),c=(u("zavE"),u("TxLo")),d=u("vDqi"),b=u.n(d),m=function(){function l(l,n,u,t,e){var a=this;this._constant=l,this.router=u,this.toastr=t,this.spinner=e,this.router.events.subscribe((function(l){""!=n.path()&&(a.route=n.path())}))}return l.prototype.ngOnInit=function(){this.spinner.show();var l=this._constant.baseAppUrl,n=this._constant.uri_track,u=Number(sessionStorage.getItem("setSessionstorageValueUserID")),t=Number(sessionStorage.getItem("setSessionstorageValueUserResellerID")),e=Number(sessionStorage.getItem("setSessionstorageValueCompanyID")),a=l+n+"assetinfo?UserID="+u+"&ResellerID="+t+"&CompanyID="+e;this.api_assets_individual=this._constant.assetApi;var s=this._constant.getSessionstorageValueRoleID;function r(l,n,u,t){b.a.get(n).then((function(n){l(n.data,t)})).catch((function(l){console.log(l),t.error(1==u?"Asset API Error in Dashboard: "+l:"Error: Network Error. Pls. Try again.","Error",{timeOut:3e3,closeButton:!0,enableHtml:!0})}))}function c(l,n){var u=0,t=0,e=0;if(1==Array.isArray(l)){for(var a=0,s=l.length;a<s;a++)if(l[a]){if(null==l[a].LastPos||null==l[a].LastPos.Engine||0==l[a].LastPos.PosID||""===l[a].LastPos){console.log("Data is Null");continue}new google.maps.LatLng(l[a].LastPos.PosY,l[a].LastPos.PosX);var r=l[a].Tag,i=l[a].Category,c=l[a].Name,b=l[a].Make,m=l[a].Model,v=l[a].LicensePlate,g=l[a].Transmission,p=l[a].FuelType,h=o.utc(l[a].InstallDate).local().format("D-MMM-YYYY, hh:mm:ss A"),w=o.utc(M=l[a].LastPos.Timestamp).local().format("DD MMM YYYY"),f=new Date,y=o.utc(f).local().format("DD MMM YYYY");y=Date.parse(y),w=Date.parse(w),o.utc(M).local().format("D-MMM-YYYY, hh:mm:ss A");var D=d(o.utc(M).local().format()),I=void 0;switch(i){case"Car":I="assets/img/car.jpg";break;case"Truck":I="assets/img/truck.jpg";break;case"Van":I="assets/img/van.jpg";break;case"Bus":I="assets/img/bus.jpg";break;case"Motorcycle":I="assets/img/motorcycle.jpg";break;case"Recovery Veh":case"Lorry":case"10 Footer Lorry":case"14 Footer Lorry":I="assets/img/truck.jpg";break;case"Ambulance":I="assets/img/ambulance.jpg"}"Active"==D?u++:"Inactive"==D?t++:"Repair"==D&&e++,(Y=document.getElementById("assetDetails"))&&(Y.innerHTML+="<tr><td><img class='vehicle-img' src='"+I+"'/></td><td><strong><a style='color:#458FD2;'>"+c+"</a></strong></td><td>"+r+"</td><td>"+v+"</td><td>"+b+"</td><td>"+m+"</td><td>"+i+"</td><td>"+g+"</td><td>"+p+"</td><td>"+h+"</td></tr><hr style='border: 1px solid #FFFFFF !important'>",document.getElementById("total-assets").innerHTML=l.length,document.getElementById("active").innerHTML=u.toString(),document.getElementById("inactive").innerHTML=t.toString(),document.getElementById("repair").innerHTML=e.toString())}}else if(l){var M,Y;switch(r=l.Tag,i=l.Category,c=l.Name,b=l.Make,m=l.Model,v=l.LicensePlate,g=l.Transmission,p=l.FuelType,h=o.utc(l.InstallDate).local().format("D-MMM-YYYY, hh:mm:ss A"),w=o.utc(M=l.LastPos.Timestamp).local().format("DD MMM YYYY"),f=new Date,y=o.utc(f).local().format("DD MMM YYYY"),y=Date.parse(y),w=Date.parse(w),o.utc(M).local().format("D-MMM-YYYY, hh:mm:ss A"),D=d(o.utc(M).local().format()),I=void 0,i){case"Car":I="assets/img/car.jpg";break;case"Truck":I="assets/img/truck.jpg";break;case"Van":I="assets/img/van.jpg";break;case"Bus":I="assets/img/bus.jpg";break;case"Motorcycle":I="assets/img/motorcycle.jpg";break;case"Recovery Veh":case"Lorry":case"10 Footer Lorry":case"14 Footer Lorry":I="assets/img/truck.jpg";break;case"Ambulance":I="assets/img/ambulance.jpg"}"Active"==D?u++:"Inactive"==D?t++:"Repair"==D&&e++,(Y=document.getElementById("assetDetails"))&&(Y.innerHTML+="<tr><td><img class='vehicle-img' src='"+I+"'/></td><td><strong><a style='color:#458FD2;'>"+c+"</a></strong></td><td>"+r+"</td><td>"+v+"</td><td>"+b+"</td><td>"+m+"</td><td>"+i+"</td><td>"+g+"</td><td>"+p+"</td><td>"+h+"</td></tr><hr style='border: 1px solid #FFFFFF !important'>",document.getElementById("total-assets").innerHTML="1",document.getElementById("active").innerHTML=u.toString(),document.getElementById("inactive").innerHTML=t.toString(),document.getElementById("repair").innerHTML=e.toString())}else document.getElementById("total-assets").innerHTML="0",document.getElementById("active").innerHTML="0",document.getElementById("inactive").innerHTML="0",document.getElementById("repair").innerHTML="0"}function d(l){var n=o().format(),u=o.duration(o(n).diff(o(l))),t=parseInt(u.asDays()),e=parseInt(u.asHours());e-=24*t;var a=parseInt(u.asMinutes());return 0==t&&0==e&&0==(a-=24*t*60+60*e)?"Active":0==t?"Inactive":"Repair"}function m(){$("#assetDetails").empty()}function v(l,n,u,t,e){var a;return 1==l?a=n+u+"assetinfo?UserID=&ResellerID="+$("#load-reseller").val()+"&CompanyID="+$("#load-company").val():2==l?a=n+u+"assetinfo?UserID="+t+"&ResellerID="+e+"&CompanyID="+$("#load-company").val():l>=3&&(a=n+u+"assetinfo?UserID="+t+"&ResellerID="+e+"&CompanyID="+$("#load-company").val()),a}r(c,a,s,this.toastr),$(".SelectResellerFilter").on("change",(function(){m()})),$(".SelectCompanyFilter").change({route:this.route,toastr:this.toastr},(function(e){var a=this;!function(e,o){Object(i.b)(a,void 0,void 0,(function(){return Object(i.e)(this,(function(a){switch(a.label){case 0:return[4,r(e,v(s,l,n,u,t),s,o)];case 1:return a.sent(),m(),[2]}}))}))}(c,e.data.toastr)})),$(".SelectAssetFilter").change({api:this.api_assets_individual,toastr:this.toastr,route:this.route},(function(e){var a=this,o=$(this).find("option:selected").val(),d=e.data.api+o;0==o&&(d=v(s,l,n,u,t)),(e.data.route="/dashboard")&&function(l,n,u){Object(i.b)(a,void 0,void 0,(function(){return Object(i.e)(this,(function(t){switch(t.label){case 0:return[4,r(l,u,s,n)];case 1:return t.sent(),m(),[2]}}))}))}(c,e.data.toastr,d)})),this.spinner.hide()},l}(),v=u("Ip0R"),g=u("ZYCi"),p=u("SZbH"),h=t.ub({encapsulation:2,styles:[["#assetDetails i.fa{width:20px;height:20px;padding-top:5px;text-align:center;border-radius:2px;color:#fff!important}#assetDetails .vehicle-img{width:60px!important}.table{table-layout:fixed}"]],data:{}});function w(l){return t.Yb(0,[(l()(),t.wb(0,0,null,null,3,"ngx-spinner",[["bdColor","rgba(51, 51, 51, 0.96)"],["size","medium"],["type","ball-spin-clockwise"]],null,null,null,s.b,s.a)),t.vb(1,770048,null,0,r.a,[r.c,t.h],{bdColor:[0,"bdColor"],size:[1,"size"],type:[2,"type"]},null),(l()(),t.wb(2,0,null,0,1,"p",[["style","color: white"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Please Wait. "])),(l()(),t.wb(4,0,null,null,84,"div",[["class","animated fadeIn"]],null,null,null,null,null)),(l()(),t.wb(5,0,null,null,48,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.wb(6,0,null,null,11,"div",[["class","col-sm-6 col-lg-3"]],null,null,null,null,null)),(l()(),t.wb(7,0,null,null,10,"div",[["class","brand-card"]],null,null,null,null,null)),(l()(),t.wb(8,0,null,null,5,"div",[["class","card-body pb-3 bg-success"]],null,null,null,null,null)),(l()(),t.wb(9,0,null,null,1,"div",[["class","btn-group float-right"]],null,null,null,null,null)),(l()(),t.wb(10,0,null,null,0,"i",[["class","fa fa-car fa-2x"]],null,null,null,null,null)),(l()(),t.wb(11,0,null,null,0,"div",[["class","text-value"],["id","active"]],null,null,null,null,null)),(l()(),t.wb(12,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Active vehicles"])),(l()(),t.wb(14,0,null,null,3,"div",[["class","brand-card-body"]],null,null,null,null,null)),(l()(),t.wb(15,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.wb(16,0,null,null,1,"div",[["class","text-uppercase text-muted small"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Number of active vehicles"])),(l()(),t.wb(18,0,null,null,11,"div",[["class","col-sm-6 col-lg-3"]],null,null,null,null,null)),(l()(),t.wb(19,0,null,null,10,"div",[["class","brand-card"]],null,null,null,null,null)),(l()(),t.wb(20,0,null,null,5,"div",[["class","card-body pb-3 bg-danger"]],null,null,null,null,null)),(l()(),t.wb(21,0,null,null,1,"div",[["class","btn-group float-right"]],null,null,null,null,null)),(l()(),t.wb(22,0,null,null,0,"i",[["class","fa fa-car fa-2x"]],null,null,null,null,null)),(l()(),t.wb(23,0,null,null,0,"div",[["class","text-value"],["id","inactive"]],null,null,null,null,null)),(l()(),t.wb(24,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["In-active vehicles"])),(l()(),t.wb(26,0,null,null,3,"div",[["class","brand-card-body"]],null,null,null,null,null)),(l()(),t.wb(27,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.wb(28,0,null,null,1,"div",[["class","text-uppercase text-muted small"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Number of in-active vehicles"])),(l()(),t.wb(30,0,null,null,11,"div",[["class","col-sm-6 col-lg-3"]],null,null,null,null,null)),(l()(),t.wb(31,0,null,null,10,"div",[["class","brand-card"]],null,null,null,null,null)),(l()(),t.wb(32,0,null,null,5,"div",[["class","card-body pb-3 bg-dark"]],null,null,null,null,null)),(l()(),t.wb(33,0,null,null,1,"div",[["class","btn-group float-right"]],null,null,null,null,null)),(l()(),t.wb(34,0,null,null,0,"i",[["class","fa fa-car fa-2x"]],null,null,null,null,null)),(l()(),t.wb(35,0,null,null,0,"div",[["class","text-value"],["id","repair"]],null,null,null,null,null)),(l()(),t.wb(36,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Vehicles with issues"])),(l()(),t.wb(38,0,null,null,3,"div",[["class","brand-card-body"]],null,null,null,null,null)),(l()(),t.wb(39,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.wb(40,0,null,null,1,"div",[["class","text-uppercase text-muted small"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Number of vehicles with issues"])),(l()(),t.wb(42,0,null,null,11,"div",[["class","col-sm-6 col-lg-3"]],null,null,null,null,null)),(l()(),t.wb(43,0,null,null,10,"div",[["class","brand-card"]],null,null,null,null,null)),(l()(),t.wb(44,0,null,null,5,"div",[["class","card-body pb-3 bg-info"]],null,null,null,null,null)),(l()(),t.wb(45,0,null,null,1,"div",[["class","btn-group float-right"]],null,null,null,null,null)),(l()(),t.wb(46,0,null,null,0,"i",[["class","fa fa-car fa-2x"]],null,null,null,null,null)),(l()(),t.wb(47,0,null,null,0,"div",[["class","text-value"],["id","total-assets"]],null,null,null,null,null)),(l()(),t.wb(48,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Total vehicles"])),(l()(),t.wb(50,0,null,null,3,"div",[["class","brand-card-body"]],null,null,null,null,null)),(l()(),t.wb(51,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.wb(52,0,null,null,1,"div",[["class","text-uppercase text-muted small"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Total number of vehicles"])),(l()(),t.wb(54,0,null,null,34,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.wb(55,0,null,null,33,"div",[["class","col-md-12"]],null,null,null,null,null)),(l()(),t.wb(56,0,null,null,32,"div",[["class","card"]],null,null,null,null,null)),(l()(),t.wb(57,0,null,null,3,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),t.wb(58,0,null,null,1,"span",[["class","font-weight-bold"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Vehicle List"])),(l()(),t.wb(60,0,null,null,0,"span",[["class","float-right"],["id","coordinates-panel"]],null,null,null,null,null)),(l()(),t.wb(61,0,null,null,27,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.wb(62,0,null,null,25,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.wb(63,0,null,null,24,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t.wb(64,0,null,null,23,"table",[["class","table table-responsive-sm table-hover table-outline mb-0"],["width","100%"]],null,null,null,null,null)),(l()(),t.wb(65,0,null,null,21,"thead",[["class","thead-dark"]],null,null,null,null,null)),(l()(),t.wb(66,0,null,null,20,"tr",[],null,null,null,null,null)),(l()(),t.wb(67,0,null,null,1,"th",[["class","text-center"]],null,null,null,null,null)),(l()(),t.wb(68,0,null,null,0,"i",[["class","fa fa-car"]],null,null,null,null,null)),(l()(),t.wb(69,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Name"])),(l()(),t.wb(71,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Device #"])),(l()(),t.wb(73,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["License Plate Number"])),(l()(),t.wb(75,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Make"])),(l()(),t.wb(77,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Model"])),(l()(),t.wb(79,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Category"])),(l()(),t.wb(81,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Transmission"])),(l()(),t.wb(83,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Fuel Type"])),(l()(),t.wb(85,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Installation Date"])),(l()(),t.wb(87,0,null,null,0,"tbody",[["id","assetDetails"]],null,null,null,null,null)),(l()(),t.wb(88,0,null,null,0,"br",[],null,null,null,null,null))],(function(l,n){l(n,1,0,"rgba(51, 51, 51, 0.96)","medium","ball-spin-clockwise")}),null)}function f(l){return t.Yb(0,[(l()(),t.wb(0,0,null,null,1,"ng-component",[],null,null,null,w,h)),t.vb(1,114688,null,0,m,[c.a,v.h,g.l,p.j,r.c],null,null)],(function(l,n){l(n,1,0)}),null)}var y=t.sb("ng-component",m,f,{},{},[]),D=u("iutN"),I=u("gIcY"),M={title:"Dashboard"},Y=function(){return function(){}}(),L=u("Zseb"),x=u("xtZt"),T=u("9EwZ");u.d(n,"DashboardModuleNgFactory",(function(){return k}));var k=t.tb(e,[],(function(l){return t.Ib([t.Jb(512,t.j,t.X,[[8,[a.a,y,D.a]],[3,t.j],t.x]),t.Jb(4608,I.o,I.o,[]),t.Jb(4608,v.n,v.m,[t.u]),t.Jb(1073742336,I.n,I.n,[]),t.Jb(1073742336,I.e,I.e,[]),t.Jb(1073742336,g.p,g.p,[[2,g.u],[2,g.l]]),t.Jb(1073742336,Y,Y,[]),t.Jb(1073742336,L.b,L.b,[]),t.Jb(1073742336,x.e,x.e,[]),t.Jb(1073742336,T.a,T.a,[]),t.Jb(1073742336,v.c,v.c,[]),t.Jb(1073742336,r.b,r.b,[]),t.Jb(1073742336,e,e,[]),t.Jb(1024,g.j,(function(){return[[{path:"",component:m,data:M}]]}),[])])}))}}]);