(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"9EwZ":function(l,n,e){"use strict";e.d(n,"a",(function(){return t})),e("CcnG"),e("gIcY");var t=function(){function l(){}return l.forRoot=function(){return{ngModule:l,providers:[]}},l}()},FoVa:function(l,n,e){"use strict";e.r(n);var t=e("CcnG"),o=function(){return function(){}}(),a=e("iutN"),s=e("pMnS"),i=e("jvCn"),r=e("miAi"),u=e("wd/R"),p=(e("zavE"),e("TxLo")),c=e("vDqi"),d=e.n(c),g=function(){function l(l,n,e,t){var o=this;this._constant=l,this.router=e,this.spinner=t,this.router.events.subscribe((function(l){""!=n.path()&&(o.route=n.path())}))}return l.prototype.ngOnInit=function(){var l=this;this.spinner.show();var n=document.createElement("script");n.type="text/javascript",n.src="https://track-asia.com/sg/Dashboard/plugins/StyledMarker/StyledMarker.js",$("head").append(n);var e=document.createElement("script");e.type="text/javascript",e.src="https://track-asia.com/sg/Dashboard/plugins/marker-with-label/markerwithlabel.js",$("head").append(e),$("#panel").hide(),$("#infobubbleDrawing").hide();var t,o,a,s,i,r,p,c,g,m,b,f,h,v,w,y,M,x,L=this._constant.baseAppUrl,I=this._constant.uri_track,k=Number(sessionStorage.getItem("setSessionstorageValueUserID")),D=Number(sessionStorage.getItem("setSessionstorageValueUserResellerID")),C=Number(sessionStorage.getItem("setSessionstorageValueUserCompanyID")),P=this._constant.getSessionstorageValueRoleID,T=this._constant.zonetypeApi,S=this._constant.zoneApi,O=L+I+"assetinfo?UserID="+k+"&ResellerID="+D+"&CompanyID="+C,z=L+I+"zoneinfo?ResellerID="+D+"&CompanyID="+C,E=(new Array,new Array),V=new Array,A=[],N=new google.maps.MVCArray,Y=new Array,B=new Array,F=new Array,_=!0,G=[],R=["#1E90FF","#FF1493","#32CD32","#FF8C00","#4B0082","#8560a8","#005e20","#CBCC29","#495f75","#a00000","#1B1B1B"],U={},H=[],Z={},W={},j=[],J=new Array,q=new Array,K=(G=[],[]),X=[],Q=[],ll=new Array,nl={coord:[16,0,18,1,21,2,24,3,26,4,27,5,28,6,29,7,29,8,29,9,29,10,29,11,29,12,29,13,29,14,29,15,29,16,29,17,29,18,29,19,29,20,29,21,29,22,29,23,29,24,29,25,29,26,29,27,29,28,28,29,3,29,2,28,2,27,1,26,1,25,1,24,0,23,0,22,0,21,0,20,0,19,0,18,0,17,0,16,0,15,0,14,0,13,0,12,0,11,0,10,0,9,0,8,0,7,1,6,2,5,2,4,3,3,5,2,6,1,8,0,16,0],type:"poly"},el={},tl="https://chart.googleapis.com/chart?chst=";google,el.BUBBLE={defaults:{text:"",color:"00ff00",fore:"000000",starcolor:null},getURL:function(l){var n=tl+"d_bubble_text_small_withshadow&chld=bb|";return n+=l.get("text")+"|",(n+=l.get("color").replace(/#/,"")+"|")+l.get("fore").replace(/#/,"")},getShadowURL:function(l){return tl+"d_bubble_text_small_withshadow&chld=bb|"+l.get("text")},getAnchor:function(l,n,e){return new google.maps.Point(0,42)},getShadowAnchor:function(l,n,e){return new google.maps.Point(0,44)},getShape:function(l,n,e){var t={};return t.coord=[0,44,13,26,13,6,17,1,n-4,1,n,6,n,21,n-4,26,21,26],t.type="poly",t}};var ol=new google.maps.LatLng(1.3521,103.8198);for(var al in google.maps.MapTypeId)this._constant.mapTypeIds.push(google.maps.MapTypeId[al]);var sl,il={zoom:12,center:ol,panControl:!1,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,mapTypeIds:this._constant.mapTypeIds,position:google.maps.ControlPosition.TOP_LEFT},streetViewControl:!1,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},fullscreenControl:!0,fullscreenControlOptions:{position:google.maps.ControlPosition.TOP_LEFT},scaleControl:!0,overviewMapControl:!0};(sl=new google.maps.Map(document.getElementById("map-canvas"),il)).controls[google.maps.ControlPosition.BOTTOM_CENTER].push(document.getElementById("panel")),function(){var l=document.createElement("DIV");$(l).addClass("gmap-control-container").addClass("gmnoprint");var n=document.createElement("DIV");$(n).addClass("gmap-control"),$(n).text("Traffic"),$(l).append(n);var e=document.createElement("DIV");$(e).addClass("gmap-control-legend"),$(e).html('<ul><li><span style="background-color: #30ac3e">&nbsp;&nbsp;</span><span style="color: #30ac3e"> &gt; Smooth Traffic</span></li><li><span style="background-color: #ffcf00">&nbsp;&nbsp;</span><span style="color: #ffcf00"> Slow Moving Traffic</span></li><li><span style="background-color: #ff0000">&nbsp;&nbsp;</span><span style="color: #ff0000"> &lt; Heavy Traffic</span></li><li><span style="background-color: #c0c0c0">&nbsp;&nbsp;</span><span style="color: #c0c0c0"> No data available</span></li></ul>'),$(e).hide(),$(l).append(e),$(n).mouseenter((function(){$(e).show()})).mouseleave((function(){$(e).hide()}));var t=new google.maps.TrafficLayer;google.maps.event.addDomListener(n,"click",(function(){void 0===t.getMap()||null===t.getMap()?($(n).addClass("gmap-control-active"),t.setMap(sl)):(t.setMap(null),$(n).removeClass("gmap-control-active"))})),sl.controls[google.maps.ControlPosition.TOP_LEFT].push(l)}(),sl.mapTypes.set("Mapbox",new google.maps.ImageMapType({getTileUrl:function(l,n){var e=El(l,n);return e?(Math.pow(2,n),"https://tiles.locationiq.com/v2/obk/r/"+n+"/"+e.x+"/"+e.y+".png?key=ece7de2808b2c0"):null},tileSize:new google.maps.Size(256,256),name:"Mapbox",alt:"Mapbox GL",maxZoom:20})),sl.mapTypes.set("OSM",new google.maps.ImageMapType({getTileUrl:function(l,n){var e=El(l,n);return e?(Math.pow(2,n),"https://tile.openstreetmap.org/"+n+"/"+e.x+"/"+e.y+".png"):null},tileSize:new google.maps.Size(256,256),name:"OSM",alt:"Open Street Map",maxZoom:20})),sl.mapTypes.set("PublicTransport",new google.maps.ImageMapType({getTileUrl:function(l,n){var e=El(l,n);return e?(Math.pow(2,n),"https://tile.memomaps.de/tilegen/"+n+"/"+e.x+"/"+e.y+".png"):null},tileSize:new google.maps.Size(256,256),name:"Public",alt:"Show Public Transport",maxZoom:20})),sl.mapTypes.set("OneMap",new google.maps.ImageMapType({getTileUrl:function(l,n){var e=El(l,n);return e?(Math.pow(2,n),"https://maps-a.onemap.sg/v3/Night/"+n+"/"+e.x+"/"+e.y+".png"):null},tileSize:new google.maps.Size(256,256),name:"One Map",alt:"One Map",maxZoom:20})),pl(cl,z),Ll(Il,O,this.route),google.maps.event.addListener(sl,"mousemove",(function(l){document.getElementById("coordinates-panel").innerHTML=l.latLng.lat()+", "+l.latLng.lng()}));var rl={strokeWeight:0,fillOpacity:.45,editable:!1};function ul(l){return l*(Math.PI/180)}function pl(l,n){d.a.get(n).then((function(n){l(n.data)})).catch((function(l){console.log(l)}))}function cl(l){for(var n=0;n<l.length;n++){var e,t,o,a=l[n],i=a.ZoneID,r=a.Name,u=a.Type,p=a.Perimeter,c=a.Company,d=a.Color,b=a.Location,f=p.split(" "),v="https://chart.apis.google.com/chart?cht=mm&chs=24x32&chco=FFFFFF,"+(16777215*Math.random()<<0).toString(16)+"&ext=.png";if(/\s/.test(p)){if(1==f.length){for(var w=0;w<f.length;w++)e=f[w].split(","),W.Zones={center:new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1])),radius:e[2]};for(var y in W){var M={strokeColor:d,strokeOpacity:.8,strokeWeight:2,fillColor:d,fillOpacity:.35,map:sl,Company:c,Name:r,Pos:f,zoneID:i,center:W[y].center,radius:Math.sqrt(W[y].radius)};o=new google.maps.Circle(M)}F.push(o),google.maps.event.addListener(o,"click",ml),s=new google.maps.InfoWindow,google.maps.event.addListener(o,"click",(function(){sl.panTo(this.position)}))}else if(f.length<=2){var x=f[1],L=f[0].split(","),I=L[0],k=L[1],D=x.split(","),C=D[0],P=D[1],T=dl(C-I),S=dl(P-k),O=Math.sin(T/2)*Math.sin(T/2)+Math.cos(dl(I))*Math.cos(dl(C))*Math.sin(S/2)*Math.sin(S/2),z=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O))*6371*100;for(var E in e=f[0].split(","),Z.Zones={center:new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1])),radius:z},Z){var V={strokeColor:d,strokeOpacity:.8,strokeWeight:2,fillColor:d,fillOpacity:.35,map:sl,Company:c,Name:r,Pos:f,zoneID:i,center:Z[E].center,radius:100*Math.sqrt(Z[E].radius)};t=new google.maps.Circle(V)}B.push(t),google.maps.event.addListener(t,"click",ml),s=new google.maps.InfoWindow,google.maps.event.addListener(t,"click",(function(){sl.panTo(this.position)}))}else if(f.length>=3){for(w=0;w<f.length;w++)e=f[w].split(","),N.push(new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1])));g=new google.maps.Polygon({path:N,strokeColor:d,strokeOpacity:.8,strokeWeight:3,fillColor:d,fillOpacity:.35,Company:c,Name:r,Pos:f,zoneID:i,map:sl}),N=[],Y.push(g),g.setMap(sl),google.maps.event.addListener(g,"click",gl),s=new google.maps.InfoWindow,google.maps.event.addListener(g,"click",(function(){sl.panTo(this.position)}))}}else{var A=l[n].Perimeter.split(","),$=new google.maps.LatLng(parseFloat(A[0]),parseFloat(A[1]));m=new MarkerWithLabel({position:$,draggable:!1,raiseOnDrag:!1,map:sl,icon:v,labelContent:r,labelAnchor:new google.maps.Point(40,0),labelClass:"labels",labelStyle:{opacity:.75},labelInBackground:!1}),q.push(m),h="<div class='form-group' style='color:#4C4C4C;><div class='col-md-8'><h6 class='map-heading'>"+r+"</h6></div><table id='assetDetails' class='table table-vcenter'><tbody><tr><td><span data-l11n class='text-bold'>Location:&nbsp;</span>"+b+"<br /><span data-l11n class='text-bold'>Type:&nbsp;</span>"+u+"<br /><span class='text-bold'>Coordinates:&nbsp;</span>"+p+"</td></tr>",bl(m)}}return l}function dl(l){return l*(Math.PI/180)}function gl(l){this.getPath();var n="<div class='form-group' style='color:#4C4C4C;><div class='col-md-8'><h6 class='map-heading'>"+this.Name+"</h6></div><table id='assetDetails' class='table table-vcenter'><tbody><tr><td><span data-l11n class='text-bold'>Company:&nbsp;</span>"+this.Company+"<br /><span class='text-bold'>Clicked location:&nbsp;</span>"+l.latLng.lat()+","+l.latLng.lng()+"</td></tr>";s.setContent(n),s.setPosition(l.latLng),s.open(sl)}function ml(l){var n="<div class='form-group' style='color:#4C4C4C;><div class='col-md-8'><h6 class='map-heading'>"+this.Name+"</h6></div><table id='assetDetails' class='table table-vcenter'><tbody><tr><td><span data-l11n class='text-bold'>Company:&nbsp;</span>"+this.Company+"<br /><span class='text-bold'>Clicked location:&nbsp;</span>"+l.latLng.lat()+","+l.latLng.lng()+"</td></tr>";s.setContent(n),s.setPosition(l.latLng),s.open(sl)}function bl(l){var n=new google.maps.InfoWindow({content:h});X.push(n),l.addListener("click",(function(){n.open(l.get("map"),l)}))}function fl(){b&&(b.setEditable(!1),b=null)}function hl(l){fl(),b=l,l.setEditable("rectangle"!=l.type)}function vl(){for(var l=0;l<G.length;l++)G[l].overlay.setMap(null);for(G=[],l=0;l<K.length;l++)K[l].close();for(K=[],l=0;l<ll.length;l++)ll[l].setMap(null);ll=[],p.setOptions({drawingControl:!0})}function wl(){if(""==$("#zname").val())alert("Zone name must not be empty");else if(/\s/.test(f))yl("Default");else{var l=new FormData;l.append("email","anthony_agustin@acecom.com.sg"),l.append("password","acecom2015"),$.ajax({async:!0,crossDomain:!0,url:"https://developers.onemap.sg/privateapi/auth/post/getToken",method:"POST",processData:!1,contentType:!1,mimeType:"multipart/form-data",data:l}).done((function(l){var n=JSON.parse(l),e="https://developers.onemap.sg/privateapi/commonsvc/revgeocode?location="+f+"&token="+n.access_token;console.log(e),$.ajax({url:e,type:"GET",success:function(l){if(l.GeocodeInfo.length>0){var e="";null==l.GeocodeInfo[0].BLOCK&&null==l.GeocodeInfo[0].BLOCK||(e=l.GeocodeInfo[0].BLOCK+" "),null==l.GeocodeInfo[0].ROAD&&null==l.GeocodeInfo[0].ROAD||(e+=l.GeocodeInfo[0].ROAD+" "),null==l.GeocodeInfo[0].BUILDINGNAME&&null==l.GeocodeInfo[0].BUILDINGNAME||"null"!=l.GeocodeInfo[0].BUILDINGNAME&&(e+=l.GeocodeInfo[0].BUILDINGNAME),yl(e)}else{var t="https://developers.onemap.sg/privateapi/commonsvc/revgeocode?location="+f+"&token="+n.access_token;console.log(t),$.ajax({url:t,type:"GET",success:function(l){if(0==l.GeocodeInfo.length)console.log("No Address"),yl("No Address");else{var n="";null==l.GeocodeInfo[0].BLOCK&&null==l.GeocodeInfo[0].BLOCK||(n=l.GeocodeInfo[0].BLOCK+" "),null==l.GeocodeInfo[0].ROAD&&null==l.GeocodeInfo[0].ROAD||(n+=l.GeocodeInfo[0].ROAD+" "),null==l.GeocodeInfo[0].BUILDINGNAME&&null==l.GeocodeInfo[0].BUILDINGNAME||"null"!=l.GeocodeInfo[0].BUILDINGNAME&&(n+=l.GeocodeInfo[0].BUILDINGNAME),yl(n)}}})}}})}))}}function yl(l){var n,e=new Date,t=u.utc(e).local().format("DD MMM YYYY, hh:mm:ss A");n=Number(sessionStorage.getItem("setSessionstorageValueRoleID"))>2?{ZoneID:0,Name:$("#zname").val(),TypeID:$("#getZoneTypes").val(),CompanyID:Number(sessionStorage.getItem("setSessionstorageValueUserCompanyID")),CreatedDate:t,Perimeter:f,CellIds:"",Location:l,Created_User:sessionStorage.getItem("setSessionstorageValueUser"),Modified_User:sessionStorage.getItem("setSessionstorageValueUser"),Color:sessionStorage.getItem("setSessionstorageValueZoneColor")}:{ZoneID:0,Name:$("#zname").val(),TypeID:$("#getZoneTypes").val(),CompanyID:sessionStorage.getItem("setSessionstorageValueAssetCompany"),CreatedDate:t,Perimeter:f,CellIds:"",Location:l,Created_UserID:Number(sessionStorage.getItem("setSessionstorageValueUserID")),Modified_UserID:Number(sessionStorage.getItem("setSessionstorageValueUserID")),Color:sessionStorage.getItem("setSessionstorageValueZoneColor")},d.a.post(S,n).then((function(l){console.log(l.data),window.location.reload(!0)})).catch((function(l){console.log(l)}))}function Ml(l){c=l;for(var n=0;n<R.length;++n){var e=R[n];U[e].style.border=e==l?"2px solid #789":"2px solid #fff"}var t=p.get("polylineOptions");t.strokeColor=l,p.set("polylineOptions",t);var o=p.get("rectangleOptions");o.fillColor=l,p.set("rectangleOptions",o);var a=p.get("circleOptions");a.fillColor=l,p.set("circleOptions",a);var s=p.get("polygonOptions");s.fillColor=l,p.set("polygonOptions",s),sessionStorage.setItem("setSessionstorageValueZoneColor",c)}function xl(l){var n=document.createElement("span");return n.className="color-button",n.style.backgroundColor=l,google.maps.event.addDomListener(n,"click",(function(){Ml(l),function(l){b&&(b.type==google.maps.drawing.OverlayType.POLYLINE?b.set("strokeColor",l):b.set("fillColor",l))}(l)})),n}function Ll(l,n,e){d.a.get(n).then((function(n){l(n.data,e)})).catch((function(l){console.log(l)}))}function Il(l,n){for(var e=0,o=0,s=0,p=0,c=new google.maps.LatLngBounds,d=0,g=l.length;d<g;d++)if(l[d]){if(null==l[d].LastPos||null==l[d].LastPos.Engine||0==l[d].LastPos.PosID||""===l[d].LastPos){console.log("Data is Null"),p++;continue}var m=l[d],b=new google.maps.LatLng(l[d].LastPos.PosY,l[d].LastPos.PosX),f=l[d].AssetID,h=l[d].Tag,v=l[d].Category,w=l[d].Name,y=l[d].Gps,M=l[d].Gprs,x=l[d].Engine,L=l[d].LastPos.Fix,I=l[d].Make,k=l[d].Model,D=l[d].LicensePlate,C=l[d].LastPos.Location,P=l[d].LastPos.Speed,T=l[d].LastPos.Course,S=l[d].LastPos.Zone,O=l[d].LastPos.Mileage,z=l[d].LastPos.Timestamp,A=l[d].LastPos.Battery.toFixed(2),N=l[d].Name.match(/.{1,28}/g).join("<br/>").substring(0,18),Y=l[d].LastPos.PosX,B=l[d].LastPos.PosY,F=u.utc(z).local().format("DD MMM YYYY"),G=new Date,R=u.utc(G).local().format("DD MMM YYYY");R=Date.parse(R),F=Date.parse(F);var U=u.utc(z).local().format("D-MMM-YYYY, hh:mm:ss A"),H=Tl(u.utc(z).local().format()),Z=void 0;switch(v){case"Car":Z="assets/img/car.jpg";break;case"Truck":Z="assets/img/truck.jpg";break;case"Van":Z="assets/img/van.jpg";break;case"Bus":Z="assets/img/bus.jpg";break;case"Motorcycle":Z="assets/img/motorcycle.jpg";break;case"Recovery Veh":case"Lorry":case"10 Footer Lorry":case"14 Footer Lorry":Z="assets/img/truck.jpg";break;case"Ambulance":Z="assets/img/ambulance.jpg"}var W,j,J=void 0;"MOVE"==x?J="#5cb85c":"IDLE"==x?J="#f0ad4e":"STOP"==x&&R>F?J="#696969":"STOP"==x&&(J="#d9534f"),W={path:"M17.402,0H5.643C2.526,0,0,3.467,0,6.584v34.804c0,3.116,2.526,5.644,5.643,5.644h11.759c3.116,0,5.644-2.527,5.644-5.644 V6.584C23.044,3.467,20.518,0,17.402,0z M22.057,14.188v11.665l-2.729,0.351v-4.806L22.057,14.188z M20.625,10.773 c-1.016,3.9-2.219,8.51-2.219,8.51H4.638l-2.222-8.51C2.417,10.773,11.3,7.755,20.625,10.773z M3.748,21.713v4.492l-2.73-0.349 V14.502L3.748,21.713z M1.018,37.938V27.579l2.73,0.343v8.196L1.018,37.938z M2.575,40.882l2.218-3.336h13.771l2.219,3.336H2.575z M19.328,35.805v-7.872l2.729-0.355v10.048L19.328,35.805z",scale:.6,strokeColor:J,strokeWeight:1,strokeOpacity:1,fillOpacity:1,fillColor:"white",offset:"5%",rotation:T,anchor:new google.maps.Point(10,25)},j=null==m.Driver.Name?"No Driver Assigned":m.Driver.Name,"MOVE"==x?e++:"IDLE"==x?o++:"STOP"==x&&R>F?p++:"STOP"==x&&s++;var q="<div id='assetInfo' class='form-group row' style='padding:0px !important;'>";q+="Unknown"!==D?"<div class='col-md-8'><h6 class='map-heading'>"+N+" - ("+D+")</h6></div>":"<div class='col-md-8'><h6 class='map-heading'>"+N+"</h6></div>",q+="<div class='col-md-4'><p style='text-align:right; padding-right:30px; padding-bottom:0px !important'>"+Dl(y,U)+"&nbsp;"+Cl(M,U)+"</p></div>",q+="<table id='assetDetails' class='table table-vcenter'><tbody><tr><td colspan='2'>",q+="<span class='font-weight-bold'>Address:&nbsp;</span>"+C+"<br /><span class='font-weight-bold'>Date:&nbsp;</span>"+U+"<br /><span>Speed:&nbsp;</span>"+Pl(P)+"<br /><span class='font-weight-bold'>GPS Status:&nbsp;</span>"+L+"<br /><span class='font-weight-bold'>Driver:&nbsp;</span>"+j+"<br /><span class='font-weight-bold'>Zones:&nbsp;</span>"+S+"<br /><span class='font-weight-bold'>Last Updated:&nbsp;</span>"+H+"<br /></td><td colspan='2' class='pl-4'><img class='vehicle-img' src='"+Z+"'/><br />","Unknown"!==I&&(q+="<span class='font-weight-bold'>Brand:&nbsp;</span>"+I+"<br />"),"Unknown"!==k&&(q+="<span class='font-weight-bold'>Model:&nbsp;</span>"+k+"<br />"),(t=kl({map:sl,position:b,icon:W,shape:nl,category:v,cat_img:Z,address:C,vechs:w,tag:h,id:f,gps:y,gprs:M,title:w,zone:S,fix:L,engine:x,speed:P,mileage:O,timestamp:U,course:T,color:J,getYPosition:B,getXPosition:Y,assetBattery:A,content:q+="</td></tr></tbody></table></div></div>",driver:j,elapsed_timestamp:H})).setMap(sl),a=new StyledMarker({styleIcon:new StyledIcon(el.BUBBLE,{color:"#458FD2",text:w,fore:"#FFFFFF"}),position:b,map:sl,shadow:"none"}),E[d]&&E[d].setPosition?($("#assetStatus").empty(),t.setMap(null),a.setMap(null),E[d].setPosition(b),V[d].setPosition(b),E[d].setIcon(W),r==w?(E[d].id=f,E[d].content=q,E[d].address=C,E[d].timestamp=U,E[d].gps=y,E[d].gprs=M,E[d].engine=x,E[d].fix=L,E[d].tag=h,E[d].speed=P,E[d].cat_img=Z,E[d].driver=j,E[d].elapsed_timestamp=H,null==$("#assetInfo").val()&&null==$("#assetInfo").val()||(document.getElementById("assetInfo").innerHTML=q)):(E[d].id=f,E[d].content=q,E[d].address=C,E[d].timestamp=U,E[d].gps=y,E[d].gprs=M,E[d].engine=x,E[d].fix=L,E[d].tag=h,E[d].speed=P,E[d].cat_img=Z,E[d].driver=j,E[d].elapsed_timestamp=H)):(c.extend(b),E[d]=t,V[d]=a)}if(_&&(sl.setZoom(7),sl.fitBounds(c),_=!1),"/vrp"==n){var K=document.getElementById("assetStatus");if(K){for(i=0;i<E.length;i++)(null!=E[i]||E[i])&&(K.innerHTML+="<tr><td><strong><a class='openTrackingModal' style='color:#458FD2;'>"+E[i].id+"</a></strong></td><td><strong>"+E[i].title+"</strong></td><td>"+E[i].address+"</td><td>"+E[i].timestamp+"</td><td>"+E[i].elapsed_timestamp+"</td><td>"+Pl(E[i].speed)+"</td><td>"+E[i].driver+"</td><td>"+E[i].fix+"</td><td>"+Sl(E[i].engine,E[i].timestamp)+"</td><td>"+Dl(E[i].gps,E[i].timestamp)+"</td><td>"+Cl(E[i].gprs,E[i].timestamp)+"</td></tr>");document.getElementById("total-vehicles").innerHTML=l.length,document.getElementById("getMove").innerHTML=e.toString(),document.getElementById("getIdle").innerHTML=o.toString(),document.getElementById("getStop").innerHTML=s.toString(),document.getElementById("getDown").innerHTML=p.toString()}}}function kl(l){var n=new google.maps.Marker({id:l.id,map:l.map,position:l.position,title:l.title,category:l.category,address:l.address,timestamp:l.timestamp,vechs:l.vechs,gps:l.gps,gprs:l.gprs,zone:l.zone,engine:l.engine,speed:l.speed,fix:l.fix,driver:l.driver,icon:{path:"M17.402,0H5.643C2.526,0,0,3.467,0,6.584v34.804c0,3.116,2.526,5.644,5.643,5.644h11.759c3.116,0,5.644-2.527,5.644-5.644 V6.584C23.044,3.467,20.518,0,17.402,0z M22.057,14.188v11.665l-2.729,0.351v-4.806L22.057,14.188z M20.625,10.773 c-1.016,3.9-2.219,8.51-2.219,8.51H4.638l-2.222-8.51C2.417,10.773,11.3,7.755,20.625,10.773z M3.748,21.713v4.492l-2.73-0.349 V14.502L3.748,21.713z M1.018,37.938V27.579l2.73,0.343v8.196L1.018,37.938z M2.575,40.882l2.218-3.336h13.771l2.219,3.336H2.575z M19.328,35.805v-7.872l2.729-0.355v10.048L19.328,35.805z",scale:.6,strokeColor:l.color,strokeWeight:1,strokeOpacity:1,fillOpacity:1,fillColor:"white",offset:"5%",rotation:l.course,anchor:new google.maps.Point(10,25)},shape:l.shape,content:l.content,tag:l.tag,cat_img:l.cat_img,elapsed_timestamp:l.elapsed_timestamp});return l.content&&google.maps.event.addListener(n,"click",(function(){for(var n=0;n<A.length;n++)A[n].close();A=[],this.getMap().newMarker||(o=this.getMap().newMarker=new google.maps.InfoWindow({zIndex:999999}),A.push(o),google.maps.event.addListener(o,"domready",(function(){$("#submitdest").click((function(){return n=l.address,M=$("#destination").val(),y="https://www.google.com/maps/dir/"+n+"/"+M,void(0==new String($("#destination").val()).length?alert("Your Destination is empty!"):window.open(y,"newwindow"));var n}))})));var e=this.content;e+="<div class='form-group row col-md-12 form-inline' id='assetRoutes'><div class='col-md-2'><span class='text-bold'>Route Info:&nbsp;</span></div><div class='col-md-6' style='background-color:black !important;'>"+'<input id="destination" type="text" class="form-control form-control-sm" placeholder="Enter Destination"></div><div class=\'col-md-3\' style=\'margin-left:10px;\'><button id="submitdest" class="btn btn-block btn-primary">Search</button></div></div>',this.getMap().newMarker.setContent(e),this.getMap().newMarker.open(this.getMap(),this),this.getMap().setCenter(this.position),r=l.title})),n}function Dl(l,n){var e=new Date,t=u.utc(e).local().format("D-MMM-YYYY"),o=u(n,"D-MMM-YYYY").format("D-MMM-YYYY");return"<i class='fa fa-map-marker "+(t>o?"down":l>=2?"move":l<2&&t==o?"stop":"down")+"' title='GPS'></i>"}function Cl(l,n){var e=new Date,t=u.utc(e).local().format("D-MMM-YYYY"),o=u(n,"D-MMM-YYYY").format("D-MMM-YYYY");return"<i class='fa fa-signal "+(t>o?"down":0==l?"move":1==l?"idle":2==l&&t==o?"stop":"down")+"' title='3G'></i>"}function Pl(l){return Math.round(100*l)/100+" km/h"}function Tl(l){var n=u().format(),e=u.duration(u(n).diff(u(l))),t=parseInt(e.asDays()),o=parseInt(e.asHours());o-=24*t;var a=parseInt(e.asMinutes());return a-=24*t*60+60*o,0==t&&0==o&&0==a?"a moment ago":0==t?o+" hours "+a+" minutes ago":1==t?t+" day "+o+" hours "+a+" minutes ago":t+" days "+o+" hours "+a+" minutes ago"}function Sl(l,n){var e,t,o=new Date,a=u.utc(o).local().format("D-MMM-YYYY"),s=u(n,"D-MMM-YYYY").format("D-MMM-YYYY");return a>s?(t="down",e="DOWN"):"MOVE"==l?(t="move",e="MOVE"):"IDLE"==l?(t="idle",e="IDLE"):"STOP"==l&&a==s?(t="stop",e="STOP"):(t="down",e="DOWN"),"<span style='padding: 4px; color:white;' class='"+t+"'>"+e+"</span>"}function Ol(){for(var l=0;l<E.length;l++)E[l]&&E[l].setMap(null);for(E=[],l=0;l<V.length;l++)V[l]&&V[l].setMap(null);for(V=[],l=0;l<A.length;l++)A[l]&&A[l].close();A=[]}function zl(){for(var l=0;l<Y.length;l++)Y[l].setMap(null);for(l=0;l<B.length;l++)B[l].setMap(null);for(l=0;l<J.length;l++)J[l].setMap(null);for(J=[],l=0;l<K.length;l++)K[l].close();for(K=[],l=0;l<q.length;l++)q[l].setMap(null);for(q=[],l=0;l<G.length;l++)G[l].overlay.setMap(null);for(G=[],l=0;l<ll.length;l++)ll[l].setMap(null);ll=[],p.setOptions({drawingControl:!0})}function El(l,n){var e=l.y,t=l.x,o=1<<n;return e<0||e>=o?null:((t<0||t>=o)&&(t=(t%o+o)%o),{x:t,y:e})}(p=new google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.BOTTOM_CENTER,drawingModes:[google.maps.drawing.OverlayType.CIRCLE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.RECTANGLE]},markerOptions:{draggable:!0},polylineOptions:{editable:!0},rectangleOptions:rl,circleOptions:rl,polygonOptions:rl,map:sl})).setMap(sl),function(){for(var l=document.getElementById("color-palette"),n=0;n<R.length;++n){var e=R[n],t=xl(e);l.appendChild(t),U[e]=t}Ml(R[0])}(),google.maps.event.addListener(p,"overlaycomplete",(function(l){if(vl(),G.push(l),l.type==google.maps.drawing.OverlayType.CIRCLE&&l.overlay.getRadius(),l.type!=google.maps.drawing.OverlayType.MARKER){p.setDrawingMode(null),p.setOptions({drawingControl:!1});var n=l.overlay;n.type=l.type,google.maps.event.addListener(n,"click",(function(){hl(n)})),hl(n)}if(l.type==google.maps.drawing.OverlayType.MARKER){var e=l.overlay.getPosition();console.log(e)}})),google.maps.event.addListener(p,"drawingmode_changed",fl),google.maps.event.addListener(sl,"click",fl),google.maps.event.addListener(p,"polygoncomplete",(function(l){H.push(l),function(){console.log(l.getPath().getArray());for(var n,e=l.getPath().getArray().toString().replace(/\ /g,"").replace(/\(/g,"").replace(/\),/g," "),t=(f=e.replace(/\)/g,"")).split(" "),o=0;o<t.length;o++)n=t[0].split(",");var a=new google.maps.LatLng(parseFloat(n[0]),parseFloat(n[1])),s=new google.maps.InfoWindow({content:document.getElementById("infobubbleDrawing")});K.push(s),s.setPosition(a),s.open(sl),document.getElementById("infobubbleDrawing").style.display="block",$("#panel").show(),google.maps.event.addListener(s,"closeclick",(function(){vl(),$("#panel").hide()}))}(),google.maps.event.addDomListener(document.getElementById("savebutton"),"click",wl)})),google.maps.event.addListener(p,"circlecomplete",(function(l){var n,e,t;j.push(l);for(var a=0;a<j.length;a++){n=j[a].getCenter(),e=j[a].getRadius(),google.maps.LatLng.prototype.destinationPoint=function(l,n){n/=6371,l=ul(l);var e=ul(this.lat()),t=ul(this.lng()),o=Math.asin(Math.sin(e)*Math.cos(n)+Math.cos(e)*Math.sin(n)*Math.cos(l)),a=t+Math.atan2(Math.sin(l)*Math.sin(n)*Math.cos(e),Math.cos(n)-Math.sin(e)*Math.sin(o));return isNaN(o)||isNaN(a)?null:new google.maps.LatLng(ul(o),a*(180/Math.PI))};var s=e/1e3,i=(t=new google.maps.LatLng(n.lat(),n.lng())).destinationPoint(90,s).toString().replace(/\ /g,"").replace(/\(/g,"").replace(/\),/g," ").replace(/\)/g,"");f=n.lat()+","+n.lng()+" "+i}$.getJSON(T,(function(l){$.each(l,(function(l,n){$("#getZoneTypes").append($("<option></option>").val(n.ZoneTypeID).html(n.Name))}))})),o=new google.maps.InfoWindow({content:'<div class="form-group row"><div style="padding-top: 10px;"><h6 style="color:#4286CF; padding-bottom:10px;"><i class="fa fa-map-marker fa-lg" style="color: cornflowerblue; font-size: 1.5em;"></i> Save Zone </h6 ></div><table style="width:100%"><tbody><tr><th><div class="col-sm-12 form-group"><div class=".text-normal"> Zone Name </div><input class="form-control" id="zname" name="zname" placeholder="Enter Zone Name" type="text" style="color:black !important;"></div></th></tr><tr><th><div style="padding: 10px 0 10px 0;"></div></th></tr><tr><th><div class="col-sm-12 form-group"><div class=".text-normal"> Zone Type </div><select class="form-control" data-live-search="true" data-width="100%" id="getZoneTypes" name="getZoneTypes" style="background-color:#2F343B; color:azure;"></select > </div></th ></tr><tr><th><div style="padding: 10px 0 10px 0;"></div></th></tr><tr><th><button id="savebutton" class="btn-dark btn btn-md pull-right"> Submit </button></th></tr></tbody></table></div>'}),K.push(o),o.setPosition(t),o.open(sl),$("#panel").show(),google.maps.event.addListener(o,"closeclick",(function(){vl(),$("#panel").hide()})),google.maps.event.addListener(o,"domready",(function(){$("#savebutton").click((function(){return wl()}))}))})),google.maps.event.addListener(p,"markercomplete",(function(l){var n;J.push(l);for(var e=0;e<J.length;e++){var t=(n=J[e].getPosition()).toString().replace(/\ /g,"").replace(/\(/g,"").replace(/\),/g," ");f=t.replace(/\)/g,"")}var o=new google.maps.InfoWindow({content:document.getElementById("infobubbleDrawing")});K.push(o),o.setPosition(n),o.open(sl),document.getElementById("infobubbleDrawing").style.display="block",$("#panel").hide(),google.maps.event.addListener(o,"closeclick",(function(){!function(){for(var l=0;l<J.length;l++)J[l].setMap(null);for(J=[],l=0;l<G.length;l++)G[l].overlay.setMap(null);for(G=[],l=0;l<K.length;l++)K[l].close();K=[],p.setOptions({drawingControl:!0})}(),$("#panel").hide()})),google.maps.event.addDomListener(document.getElementById("savebutton"),"click",wl)})),google.maps.event.addListener(p,"rectanglecomplete",(function(l){Q.push(l);var n=l.getBounds(),e=n.getNorthEast(),t=n.getSouthWest(),o=new google.maps.LatLng(e.lat(),t.lng()),a=new google.maps.LatLng(t.lat(),e.lng());v=new google.maps.Marker({map:sl,position:new google.maps.LatLng(e.lat(),t.lng()),draggable:!1,title:"Drag me!"}),w=new google.maps.Marker({map:sl,position:new google.maps.LatLng(t.lat(),e.lng()),draggable:!1,title:"Drag me!"}),ll.push(v,w);for(var s=(o+","+t+","+a+","+e).replace(/\ /g,"").replace(/\(/g,"").replace(/\),/g," "),i=(f=s.replace(/\)/g,"")).split(" "),r=0;r<i.length;r++)i[0].split(",");var u=new google.maps.LatLng(e.lat(),t.lng()),p=new google.maps.InfoWindow({content:document.getElementById("infobubbleDrawing")});K.push(p),p.setPosition(u),p.open(sl),document.getElementById("infobubbleDrawing").style.display="block",$("#panel").show(),google.maps.event.addListener(p,"closeclick",(function(){vl(),$("#panel").hide()})),sessionStorage.setItem("setSessionstorageValuePerimeterLength",String(4)),google.maps.event.addDomListener(document.getElementById("savebutton"),"click",wl)})),x=setInterval((function(){Ll(Il,O,l.route)}),1e4),$("#assetStatus").on("click","a.openTrackingModal",(function(l){$("#trackingModal").modal("show");var n,e=L+I+"assetinfo/"+l.target.innerHTML,t=new Array,o=new google.maps.LatLng(1.3521,103.8198),a=new google.maps.LatLngBounds,s=!0,i={zoom:12,center:o,panControl:!1,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,fullscreenControlOptions:{position:google.maps.ControlPosition.TOP_LEFT},scaleControl:!1,overviewMapControl:!1},r=new google.maps.Map(document.getElementById("map-asset"),i);function p(l,n){d.a.get(n).then((function(n){l(n.data)})).catch((function(l){console.log(l)}))}function c(l){if(l)if(null==l.LastPos||null==l.LastPos.Engine||0==l.LastPos.PosID||""===l.LastPos)console.log("Data is Null");else{var e=new google.maps.LatLng(l.LastPos.PosY,l.LastPos.PosX),o=l.AssetID,i=l.Tag,p=l.Category,c=l.Name,d=l.Gps,g=l.Gprs,m=l.Engine,b=l.LastPos.Fix,f=l.Make,h=l.Model,v=l.LicensePlate,w=l.LastPos.Location,y=l.LastPos.Speed,M=l.LastPos.Course,x=l.LastPos.Zone,L=l.LastPos.Timestamp,I=(l.LastPos.Battery.toFixed(2),l.Name.match(/.{1,28}/g).join("<br/>").substring(0,18)),k=u.utc(L).local().format("DD MMM YYYY"),D=new Date,C=u.utc(D).local().format("DD MMM YYYY");C=Date.parse(C),k=Date.parse(k);var P=u.utc(L).local().format("D-MMM-YYYY, hh:mm:ss A"),T=Tl(u.utc(L).local().format()),S=void 0;switch(p){case"Car":S="assets/img/car.jpg";break;case"Truck":S="assets/img/truck.jpg";break;case"Van":S="assets/img/van.jpg";break;case"Bus":S="assets/img/bus.jpg";break;case"Motorcycle":S="assets/img/motorcycle.jpg";break;case"Recovery Veh":case"Lorry":case"10 Footer Lorry":case"14 Footer Lorry":S="assets/img/truck.jpg";break;case"Ambulance":S="assets/img/ambulance.jpg"}var O,z,V=void 0;"MOVE"==m?V="#5cb85c":"IDLE"==m?V="#f0ad4e":"STOP"==m&&C>k?V="#696969":"STOP"==m&&(V="#d9534f"),O={path:"M17.402,0H5.643C2.526,0,0,3.467,0,6.584v34.804c0,3.116,2.526,5.644,5.643,5.644h11.759c3.116,0,5.644-2.527,5.644-5.644 V6.584C23.044,3.467,20.518,0,17.402,0z M22.057,14.188v11.665l-2.729,0.351v-4.806L22.057,14.188z M20.625,10.773 c-1.016,3.9-2.219,8.51-2.219,8.51H4.638l-2.222-8.51C2.417,10.773,11.3,7.755,20.625,10.773z M3.748,21.713v4.492l-2.73-0.349 V14.502L3.748,21.713z M1.018,37.938V27.579l2.73,0.343v8.196L1.018,37.938z M2.575,40.882l2.218-3.336h13.771l2.219,3.336H2.575z M19.328,35.805v-7.872l2.729-0.355v10.048L19.328,35.805z",scale:.6,strokeColor:V,strokeWeight:1,strokeOpacity:1,fillOpacity:1,fillColor:"white",offset:"5%",rotation:M,anchor:new google.maps.Point(10,25)},z=null==l.Driver.Name?"No Driver Assigned":l.Driver.Name;var A="<div id='assetInfo' class='form-group row' style='padding:0px !important;'>";A+="Unknown"!==v?"<div class='col-md-8'><h6 class='map-heading'>"+I+" - ("+v+")</h6></div>":"<div class='col-md-8'><h6 class='map-heading'>"+I+"</h6></div>",A+="<div class='col-md-4'><p style='text-align:right; padding-right:30px; padding-bottom:0px !important'>"+Dl(d,P)+"&nbsp;"+Cl(g,P)+"</p></div>",A+="<table id='assetDetails' class='table table-vcenter'><tbody><tr><td colspan='2'>",A+="<span class='font-weight-bold'>Address:&nbsp;</span>"+w+"<br /><span class='font-weight-bold'>Date:&nbsp;</span>"+P+"<br /><span>Speed:&nbsp;</span>"+Pl(y)+"<br /><span class='font-weight-bold'>GPS Status:&nbsp;</span>"+b+"<br /><span class='font-weight-bold'>Driver:&nbsp;</span>"+z+"<br /><span class='font-weight-bold'>Zones:&nbsp;</span>"+x+"<br /><span class='font-weight-bold'>Last Updated:&nbsp;</span>"+T+"<br /></td><td colspan='2' class='pl-4'><img class='vehicle-img' src='"+S+"'/><br />","Unknown"!==f&&(A+="<span class='font-weight-bold'>Brand:&nbsp;</span>"+f+"<br />"),"Unknown"!==h&&(A+="<span class='font-weight-bold'>Model:&nbsp;</span>"+h+"<br />"),A+="</td></tr></tbody></table></div></div>",(n=new google.maps.Marker({id:o,map:r,position:e,title:c,category:p,address:w,timestamp:P,vechs:c,gps:d,gprs:g,zone:x,engine:m,speed:y,fix:b,driver:z,icon:{path:"M17.402,0H5.643C2.526,0,0,3.467,0,6.584v34.804c0,3.116,2.526,5.644,5.643,5.644h11.759c3.116,0,5.644-2.527,5.644-5.644 V6.584C23.044,3.467,20.518,0,17.402,0z M22.057,14.188v11.665l-2.729,0.351v-4.806L22.057,14.188z M20.625,10.773 c-1.016,3.9-2.219,8.51-2.219,8.51H4.638l-2.222-8.51C2.417,10.773,11.3,7.755,20.625,10.773z M3.748,21.713v4.492l-2.73-0.349 V14.502L3.748,21.713z M1.018,37.938V27.579l2.73,0.343v8.196L1.018,37.938z M2.575,40.882l2.218-3.336h13.771l2.219,3.336H2.575z M19.328,35.805v-7.872l2.729-0.355v10.048L19.328,35.805z",scale:.6,strokeColor:V,strokeWeight:1,strokeOpacity:1,fillOpacity:1,fillColor:"white",offset:"5%",rotation:M,anchor:new google.maps.Point(10,25)},shape:nl,content:A,tag:i,cat_img:S,elapsed_timestamp:T})).setMap(r),n.content&&(google.maps.event.addListener(n,"click",(function(){this.getMap().newMarker=new google.maps.InfoWindow({zIndex:999999}),this.getMap().newMarker.setContent(this.content),this.getMap().newMarker.open(this.getMap(),this),this.getMap().setCenter(this.position),r.panTo(this.getPosition())})),n.getMap().newMarker=new google.maps.InfoWindow({zIndex:999999}),n.getMap().newMarker.setContent(n.content),n.getMap().newMarker.open(n.getMap(),n),n.getMap().setCenter(n.position),r.panTo(n.getPosition())),t[0]&&t[0].setPosition?(n.setMap(null),t[0].setPosition(e),t[0].setIcon(O),t[0].id=o,t[0].content=A,t[0].address=w,t[0].timestamp=P,t[0].gps=d,t[0].gprs=g,t[0].engine=m,t[0].fix=b,t[0].tag=i,t[0].speed=y,t[0].cat_img=S,E[0].driver=z,t[0].elapsed_timestamp=T):(a.extend(e),r.setZoom(7),t[0]=n),s&&(r.setZoom(7),r.fitBounds(a),s=!1,$("#trackingFormTitle").text(c))}}p(c,e),x=setInterval((function(){p(c,e)}),1e4)})),$(".SelectResellerFilter").on("change",(function(){clearInterval(x),Ol(),zl()})),$(".SelectCompanyFilter").change({route:this.route},(function(l){clearInterval(x),Ol(),zl();var n=function(l,n,e,t){var o;return 1==l?o=n+e+"zoneinfo?ResellerID="+$("#load-reseller").val()+"&CompanyID="+$("#load-company").val():2==l?o=n+e+"zoneinfo?ResellerID="+t+"&CompanyID="+$("#load-company").val():l>=3&&(o=n+e+"zoneinfo?ResellerID="+t+"&CompanyID="+$("#load-company").val()),o}(P,L,I,D),e=function(l,n,e,t,o){var a;return 1==l?a=n+e+"assetinfo?UserID=&ResellerID="+$("#load-reseller").val()+"&CompanyID="+$("#load-company").val():2==l?a=n+e+"assetinfo?UserID="+t+"&ResellerID="+o+"&CompanyID="+$("#load-company").val():l>=3&&(a=n+e+"assetinfo?UserID="+t+"&ResellerID="+o+"&CompanyID="+$("#load-company").val()),a}(P,L,I,k,D);pl(cl,n),Ll(Il,e,l.data.route),x=setInterval((function(){Ll(Il,e,l.data.route)}),1e4)})),$(".SelectAssetFilter").on("change",(function(){var l=$(this).find("option:selected").val();for(i=0;i<E.length;i++)t=E[i],E[i]&&t.id==l&&google.maps.event.trigger(E[i],"click")})),this.spinner.hide()},l}(),m=e("Ip0R"),b=e("ZYCi"),f=t.ub({encapsulation:2,styles:[["#map-canvas{position:relative;margin:0 auto;padding:0;overflow:hidden;max-width:none!important;box-shadow:none!important}.gmap-control-container{margin:10px 5.3px 5.3px -6px;padding-left:2px;padding-right:2px}.gmap-control{cursor:pointer;background-color:-moz-linear-gradient(center top,#fefefe,#f3f3f3);background-color:#fefefe!important;border:1px solid #a9bbdf;border-radius:2px;padding:0 6px;line-height:160%;font-size:11px;font-family:Arial,sans-serif;box-shadow:2px 2px 3px rgba(0,0,0,.35);-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;-ms-user-select:none;user-select:none}.gmap-control-active,.gmap-control:hover{border:1px solid #678ac7}.gmap-control-active{background-color:-moz-linear-gradient(center top,#6d8acc,#7b98d9)!important;background-color:#6d8acc!important;color:#fff;font-weight:700}.gmap-control-legend{position:absolute;text-align:left;z-index:-1;top:20px;left:0;width:150px;height:86px;font-size:10px;background:#fefefe;border:1px solid #a9bbdf;padding:10px;box-shadow:2px 2px 3px rgba(0,0,0,.35)}.gmap-control-legend ul{margin:0;padding:0;list-style-type:none}.gmap-control-legend li{line-height:160%}.controls{margin-top:7px;border:1px solid transparent;border-radius:2px 0 0 2px;box-sizing:border-box;-moz-box-sizing:border-box;height:32px;outline:none;box-shadow:0 2px 6px rgba(0,0,0,.3)}#pac-input-from,#pac-input-to{background-color:#fff;font-family:Roboto;font-size:12px;font-weight:300;padding:0 11px 0 13px;text-overflow:ellipsis;width:300px}#pac-input,#pac-inputEN{background-color:#fff;font-family:Roboto;font-size:12px;font-weight:300;margin-left:12px;padding:0 11px 0 13px;text-overflow:ellipsis;width:300px}#pac-inputEN:focus{border-color:#4d90fe}.pac-container{font-family:Roboto}#type-selector{color:#fff;background-color:#4d90fe;padding:5px 11px 0}#type-selector label{font-family:Roboto;font-size:13px;font-weight:300}#pac-input:focus{border-color:#4d90fe}#target{width:345px}#hideDetails,#showDetails{cursor:pointer}.gm-style .gm-style-iw{top:0!important;left:0!important;max-width:450px!important;padding-top:10px;padding-right:10px;padding-bottom:10px!important;display:block!important;overflow:visible!important}.gm-style .gm-style-iw,.gm-style .gm-style-pbc{background-color:#1e1e24!important}.gm-style .gm-style-iw #google-popup p{padding:10px}.gm-style div div div div div div div div{background-color:#1e1e24!important;margin:0;padding:0;top:0;color:#fff;font-size:12px;overflow:hidden!important}.poi-info-window a:link{text-decoration:none;color:#97d8ff!important;background:none!important}.gm-style div div div div div div div div a{color:#f1f1f1;font-weight:700}.gm-style .gm-style-iw-t:after{background:linear-gradient(45deg,#3b3f48 50%,hsla(0,0%,100%,0) 51%,hsla(0,0%,100%,0))!important;background-color:transparent}.gm-style img.vehicle-img{width:120px;text-align:center;padding-bottom:10px}.gm-style .gm-style-iw-d{overflow:visible}.gm-ui-hover-effect{background-color:#fff!important;opacity:.9;top:0!important;right:0!important;width:15px!important;height:15px!important;margin-top:0!important;margin-right:0!important}.gm-ui-hover-effect img{margin:1px!important}.input-map{padding:.285rem .75rem!important;background-color:#eaeaea!important;color:#495057!important;font-size:12px!important}.info-table{font-size:13px;line-height:1.57}.info-table i{color:#fff;border-radius:4px;padding:5px 8px;font-size:13px}.move{background-color:#2b7c21}.stop{background-color:#b60003}.idle{background-color:#fea82c}.down{background-color:#696969}.form-inline .form-control{width:100%}.form-control,.form-control:focus{background-color:#fff}.form-control:focus{border-color:#46b1ff}button.gm-ui-hover-effect{margin-top:10px!important;margin-right:10px!important}.labels{color:#fff;background-color:#000;font-family:Lucida Grande,Arial,sans-serif;font-size:10px;text-align:center;width:100px;white-space:nowrap}#panel{width:200px;font-family:Arial,sans-serif;font-size:13px;float:right;margin:10px;padding:8px 8px 10px 10px;background-color:#404040;width:auto}#color-palette{clear:both}.color-button{width:14px;height:14px;font-size:0;margin:2px;float:left;cursor:pointer}nav#map-toggle button{position:absolute;left:-120px;top:70px}nav#map-toggle button i{margin-top:-2px}.open-close-container label,.open-close-container p{font-size:12px!important}.open-close-container{position:absolute;z-index:999999;right:0;top:0;height:100%;padding:5px;color:#eaeaea;font-size:14px!important}#assetStatus{font-size:12px;color:#000!important}#assetStatus i.fa{width:28px;height:24px;padding-top:5px;text-align:center;border-radius:2px;color:#fff!important}#assetStatus .vehicle-img{width:30px}#assetInfo #assetDetails{color:#fff!important;margin-bottom:0}#assetInfo p i.fa{padding:3px 4px;border-radius:2px}"]],data:{}});function h(l){return t.Yb(0,[(l()(),t.wb(0,0,null,null,3,"ngx-spinner",[["bdColor","rgba(51, 51, 51, 0.96)"],["size","medium"],["type","ball-spin-clockwise"]],null,null,null,i.b,i.a)),t.vb(1,770048,null,0,r.a,[r.c,t.h],{bdColor:[0,"bdColor"],size:[1,"size"],type:[2,"type"]},null),(l()(),t.wb(2,0,null,0,1,"p",[["style","color: white"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Please Wait. "])),(l()(),t.wb(4,0,null,null,124,"div",[["class","animated fadeIn"]],null,null,null,null,null)),(l()(),t.wb(5,0,null,null,48,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.wb(6,0,null,null,11,"div",[["class","col-sm-6 col-lg-3"]],null,null,null,null,null)),(l()(),t.wb(7,0,null,null,10,"div",[["class","brand-card"]],null,null,null,null,null)),(l()(),t.wb(8,0,null,null,5,"div",[["class","card-body pb-3 bg-success"]],null,null,null,null,null)),(l()(),t.wb(9,0,null,null,1,"div",[["class","btn-group float-right"]],null,null,null,null,null)),(l()(),t.wb(10,0,null,null,0,"i",[["class","fa fa-car fa-2x"]],null,null,null,null,null)),(l()(),t.wb(11,0,null,null,0,"div",[["class","text-value"],["id","getMove"]],null,null,null,null,null)),(l()(),t.wb(12,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["MOVE"])),(l()(),t.wb(14,0,null,null,3,"div",[["class","brand-card-body"]],null,null,null,null,null)),(l()(),t.wb(15,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.wb(16,0,null,null,1,"div",[["class","text-uppercase text-muted small"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Status when vehicle is MOVING"])),(l()(),t.wb(18,0,null,null,11,"div",[["class","col-sm-6 col-lg-3"]],null,null,null,null,null)),(l()(),t.wb(19,0,null,null,10,"div",[["class","brand-card"]],null,null,null,null,null)),(l()(),t.wb(20,0,null,null,5,"div",[["class","card-body pb-3 bg-warning"]],null,null,null,null,null)),(l()(),t.wb(21,0,null,null,1,"div",[["class","btn-group float-right"]],null,null,null,null,null)),(l()(),t.wb(22,0,null,null,0,"i",[["class","fa fa-car fa-2x"]],null,null,null,null,null)),(l()(),t.wb(23,0,null,null,0,"div",[["class","text-value"],["id","getIdle"]],null,null,null,null,null)),(l()(),t.wb(24,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["IDLE"])),(l()(),t.wb(26,0,null,null,3,"div",[["class","brand-card-body"]],null,null,null,null,null)),(l()(),t.wb(27,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.wb(28,0,null,null,1,"div",[["class","text-uppercase text-muted small"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Status when vehicle is IDLE"])),(l()(),t.wb(30,0,null,null,11,"div",[["class","col-sm-6 col-lg-3"]],null,null,null,null,null)),(l()(),t.wb(31,0,null,null,10,"div",[["class","brand-card"]],null,null,null,null,null)),(l()(),t.wb(32,0,null,null,5,"div",[["class","card-body pb-3 bg-danger"]],null,null,null,null,null)),(l()(),t.wb(33,0,null,null,1,"div",[["class","btn-group float-right"]],null,null,null,null,null)),(l()(),t.wb(34,0,null,null,0,"i",[["class","fa fa-car fa-2x"]],null,null,null,null,null)),(l()(),t.wb(35,0,null,null,0,"div",[["class","text-value"],["id","getStop"]],null,null,null,null,null)),(l()(),t.wb(36,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["STOP"])),(l()(),t.wb(38,0,null,null,3,"div",[["class","brand-card-body"]],null,null,null,null,null)),(l()(),t.wb(39,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.wb(40,0,null,null,1,"div",[["class","text-uppercase text-muted small"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Status when vehicle is OFF"])),(l()(),t.wb(42,0,null,null,11,"div",[["class","col-sm-6 col-lg-3"]],null,null,null,null,null)),(l()(),t.wb(43,0,null,null,10,"div",[["class","brand-card"]],null,null,null,null,null)),(l()(),t.wb(44,0,null,null,5,"div",[["class","card-body pb-3 bg-dark"]],null,null,null,null,null)),(l()(),t.wb(45,0,null,null,1,"div",[["class","btn-group float-right"]],null,null,null,null,null)),(l()(),t.wb(46,0,null,null,0,"i",[["class","fa fa-car fa-2x"]],null,null,null,null,null)),(l()(),t.wb(47,0,null,null,0,"div",[["class","text-value"],["id","getDown"]],null,null,null,null,null)),(l()(),t.wb(48,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["DOWN"])),(l()(),t.wb(50,0,null,null,3,"div",[["class","brand-card-body"]],null,null,null,null,null)),(l()(),t.wb(51,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.wb(52,0,null,null,1,"div",[["class","text-uppercase text-muted small"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Down for more than 24 hours"])),(l()(),t.wb(54,0,null,null,33,"div",[["class","card"]],null,null,null,null,null)),(l()(),t.wb(55,0,null,null,4,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),t.wb(56,0,null,null,1,"span",[["class","font-weight-bold"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Vehicles:\xa0"])),(l()(),t.wb(58,0,null,null,0,"span",[["id","total-vehicles"]],null,null,null,null,null)),(l()(),t.wb(59,0,null,null,0,"span",[["class","float-right"],["id","coordinates-panel"]],null,null,null,null,null)),(l()(),t.wb(60,0,null,null,5,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.wb(61,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.wb(62,0,null,null,3,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t.wb(63,0,null,null,0,"div",[["id","map-canvas"],["style","height:600px;"]],null,null,null,null,null)),(l()(),t.wb(64,0,null,null,1,"div",[["id","panel"]],null,null,null,null,null)),(l()(),t.wb(65,0,null,null,0,"div",[["id","color-palette"]],null,null,null,null,null)),(l()(),t.wb(66,0,null,null,21,"div",[["class","card-footer"]],null,null,null,null,null)),(l()(),t.wb(67,0,null,null,20,"div",[["class","row text-center"]],null,null,null,null,null)),(l()(),t.wb(68,0,null,null,4,"div",[["class","col-sm-12 col-md mb-sm-2 mb-0"]],null,null,null,null,null)),(l()(),t.wb(69,0,null,null,1,"div",[["class","text-muted"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Smooth Traffic"])),(l()(),t.wb(71,0,null,null,1,"div",[["class","progress progress-xs mt-2"]],null,null,null,null,null)),(l()(),t.wb(72,0,null,null,0,"div",[["aria-valuemax","100"],["aria-valuemin","100"],["aria-valuenow","100"],["class","progress-bar bg-success"],["role","progressbar"],["style","width: 100%"]],null,null,null,null,null)),(l()(),t.wb(73,0,null,null,4,"div",[["class","col-sm-12 col-md mb-sm-2 mb-0"]],null,null,null,null,null)),(l()(),t.wb(74,0,null,null,1,"div",[["class","text-muted"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Slow Moving Traffic"])),(l()(),t.wb(76,0,null,null,1,"div",[["class","progress progress-xs mt-2"]],null,null,null,null,null)),(l()(),t.wb(77,0,null,null,0,"div",[["aria-valuemax","100"],["aria-valuemin","100"],["aria-valuenow","100"],["class","progress-bar bg-warning"],["role","progressbar"],["style","width: 100%"]],null,null,null,null,null)),(l()(),t.wb(78,0,null,null,4,"div",[["class","col-sm-12 col-md mb-sm-2 mb-0"]],null,null,null,null,null)),(l()(),t.wb(79,0,null,null,1,"div",[["class","text-muted"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Heavy Traffic"])),(l()(),t.wb(81,0,null,null,1,"div",[["class","progress progress-xs mt-2"]],null,null,null,null,null)),(l()(),t.wb(82,0,null,null,0,"div",[["aria-valuemax","100"],["aria-valuemin","100"],["aria-valuenow","100"],["class","progress-bar bg-danger"],["role","progressbar"],["style","width: 100%"]],null,null,null,null,null)),(l()(),t.wb(83,0,null,null,4,"div",[["class","col-sm-12 col-md mb-sm-2 mb-0"]],null,null,null,null,null)),(l()(),t.wb(84,0,null,null,1,"div",[["class","text-muted"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["No Data Available"])),(l()(),t.wb(86,0,null,null,1,"div",[["class","progress progress-xs mt-2"]],null,null,null,null,null)),(l()(),t.wb(87,0,null,null,0,"div",[["aria-valuemax","100"],["aria-valuemin","100"],["aria-valuenow","100"],["class","progress-bar bg-gray-dark"],["role","progressbar"],["style","width: 100%"]],null,null,null,null,null)),(l()(),t.wb(88,0,null,null,29,"div",[["class","card"]],null,null,null,null,null)),(l()(),t.wb(89,0,null,null,28,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.wb(90,0,null,null,27,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.wb(91,0,null,null,26,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t.wb(92,0,null,null,25,"table",[["class","table table-responsive-sm table-hover table-outline mb-0 info-table"],["id","assetList"]],null,null,null,null,null)),(l()(),t.wb(93,0,null,null,23,"thead",[["class","thead-dark"]],null,null,null,null,null)),(l()(),t.wb(94,0,null,null,22,"tr",[],null,null,null,null,null)),(l()(),t.wb(95,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["ID"])),(l()(),t.wb(97,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Name"])),(l()(),t.wb(99,0,null,null,1,"th",[["class","text-center"],["width","25%"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Address"])),(l()(),t.wb(101,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Date"])),(l()(),t.wb(103,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Last Updated"])),(l()(),t.wb(105,0,null,null,1,"th",[["class","text-center"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Speed"])),(l()(),t.wb(107,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Driver"])),(l()(),t.wb(109,0,null,null,1,"th",[["class","text-center"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Fix"])),(l()(),t.wb(111,0,null,null,1,"th",[["class","text-center"],["width","70"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Engine"])),(l()(),t.wb(113,0,null,null,1,"th",[["class","text-center"],["width","50"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["GPS"])),(l()(),t.wb(115,0,null,null,1,"th",[["class","text-center"],["width","78"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Network"])),(l()(),t.wb(117,0,null,null,0,"tbody",[["id","assetStatus"]],null,null,null,null,null)),(l()(),t.wb(118,0,null,null,10,"div",[["aria-hidden","true"],["aria-labelledby","trackingModalLabel"],["class","modal fade"],["id","trackingModal"],["role","dialog"],["tabindex","-1"]],null,null,null,null,null)),(l()(),t.wb(119,0,null,null,9,"div",[["class","modal-dialog modal-lg modal-dialog-centered"],["role","document"]],null,null,null,null,null)),(l()(),t.wb(120,0,null,null,8,"div",[["class","modal-content"]],null,null,null,null,null)),(l()(),t.wb(121,0,null,null,4,"div",[["class","modal-header"]],null,null,null,null,null)),(l()(),t.wb(122,0,null,null,0,"h4",[["class","modal-title"],["id","trackingFormTitle"]],null,null,null,null,null)),(l()(),t.wb(123,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(l()(),t.wb(124,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["\xd7"])),(l()(),t.wb(126,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),t.wb(127,0,null,null,1,"div",[["class","col-md-12"]],null,null,null,null,null)),(l()(),t.wb(128,0,null,null,0,"div",[["id","map-asset"],["style","height:600px;"]],null,null,null,null,null))],(function(l,n){l(n,1,0,"rgba(51, 51, 51, 0.96)","medium","ball-spin-clockwise")}),null)}function v(l){return t.Yb(0,[(l()(),t.wb(0,0,null,null,1,"ng-component",[],null,null,null,h,f)),t.vb(1,114688,null,0,g,[p.a,m.i,b.l,r.c],null,null)],(function(l,n){l(n,1,0)}),null)}var w=t.sb("ng-component",g,v,{},{},[]),y=function(){function l(l,n,e,t){var o=this;this._constant=l,this.router=e,this.spinner=t,this.router.events.subscribe((function(l){""!=n.path()&&(o.route=n.path())}))}return l.prototype.ngOnInit=function(){var l=this;this.spinner.show();var n=document.createElement("script");n.type="text/javascript",n.src="https://track-asia.com/sg/Dashboard/plugins/StyledMarker/StyledMarker.js",$("head").append(n);var e=document.createElement("script");e.type="text/javascript",e.src="https://track-asia.com/sg/Dashboard/plugins/marker-with-label/markerwithlabel.js",$("head").append(e),$("#panel").hide(),$("#infobubbleDrawing").hide();var t,o,a,s,i,r,p,c,g,m,b,f,h,v,w,y,M,x,L=this._constant.baseAppUrl,I=this._constant.uri_track,k=Number(sessionStorage.getItem("setSessionstorageValueUserID")),D=Number(sessionStorage.getItem("setSessionstorageValueUserResellerID")),C=Number(sessionStorage.getItem("setSessionstorageValueUserCompanyID")),P=this._constant.getSessionstorageValueRoleID,T=this._constant.zonetypeApi,S=this._constant.zoneApi,O=L+I+"assetinfo?UserID="+k+"&ResellerID="+D+"&CompanyID="+C,z=L+I+"zoneinfo?ResellerID="+D+"&CompanyID="+C,E=(new Array,new Array),V=new Array,A=[],N=new google.maps.MVCArray,Y=new Array,B=new Array,F=new Array,_=!0,G=[],R=["#1E90FF","#FF1493","#32CD32","#FF8C00","#4B0082","#8560a8","#005e20","#CBCC29","#495f75","#a00000","#1B1B1B"],U={},H=[],Z={},W={},j=[],J=new Array,q=new Array,K=(G=[],[]),X=[],Q=[],ll=new Array,nl={coord:[16,0,18,1,21,2,24,3,26,4,27,5,28,6,29,7,29,8,29,9,29,10,29,11,29,12,29,13,29,14,29,15,29,16,29,17,29,18,29,19,29,20,29,21,29,22,29,23,29,24,29,25,29,26,29,27,29,28,28,29,3,29,2,28,2,27,1,26,1,25,1,24,0,23,0,22,0,21,0,20,0,19,0,18,0,17,0,16,0,15,0,14,0,13,0,12,0,11,0,10,0,9,0,8,0,7,1,6,2,5,2,4,3,3,5,2,6,1,8,0,16,0],type:"poly"},el={},tl="https://chart.googleapis.com/chart?chst=";google,el.BUBBLE={defaults:{text:"",color:"00ff00",fore:"000000",starcolor:null},getURL:function(l){var n=tl+"d_bubble_text_small_withshadow&chld=bb|";return n+=l.get("text")+"|",(n+=l.get("color").replace(/#/,"")+"|")+l.get("fore").replace(/#/,"")},getShadowURL:function(l){return tl+"d_bubble_text_small_withshadow&chld=bb|"+l.get("text")},getAnchor:function(l,n,e){return new google.maps.Point(0,42)},getShadowAnchor:function(l,n,e){return new google.maps.Point(0,44)},getShape:function(l,n,e){var t={};return t.coord=[0,44,13,26,13,6,17,1,n-4,1,n,6,n,21,n-4,26,21,26],t.type="poly",t}};var ol=new google.maps.LatLng(1.3521,103.8198);for(var al in google.maps.MapTypeId)this._constant.mapTypeIds.push(google.maps.MapTypeId[al]);var sl,il={zoom:12,center:ol,panControl:!1,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,mapTypeIds:this._constant.mapTypeIds,position:google.maps.ControlPosition.TOP_LEFT},streetViewControl:!1,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},fullscreenControl:!0,fullscreenControlOptions:{position:google.maps.ControlPosition.TOP_LEFT},scaleControl:!0,overviewMapControl:!0};(sl=new google.maps.Map(document.getElementById("map-canvas"),il)).controls[google.maps.ControlPosition.BOTTOM_CENTER].push(document.getElementById("panel")),function(){var l=document.createElement("DIV");$(l).addClass("gmap-control-container").addClass("gmnoprint");var n=document.createElement("DIV");$(n).addClass("gmap-control"),$(n).text("Traffic"),$(l).append(n);var e=document.createElement("DIV");$(e).addClass("gmap-control-legend"),$(e).html('<ul><li><span style="background-color: #30ac3e">&nbsp;&nbsp;</span><span style="color: #30ac3e"> &gt; Smooth Traffic</span></li><li><span style="background-color: #ffcf00">&nbsp;&nbsp;</span><span style="color: #ffcf00"> Slow Moving Traffic</span></li><li><span style="background-color: #ff0000">&nbsp;&nbsp;</span><span style="color: #ff0000"> &lt; Heavy Traffic</span></li><li><span style="background-color: #c0c0c0">&nbsp;&nbsp;</span><span style="color: #c0c0c0"> No data available</span></li></ul>'),$(e).hide(),$(l).append(e),$(n).mouseenter((function(){$(e).show()})).mouseleave((function(){$(e).hide()}));var t=new google.maps.TrafficLayer;google.maps.event.addDomListener(n,"click",(function(){void 0===t.getMap()||null===t.getMap()?($(n).addClass("gmap-control-active"),t.setMap(sl)):(t.setMap(null),$(n).removeClass("gmap-control-active"))})),sl.controls[google.maps.ControlPosition.TOP_LEFT].push(l)}(),sl.mapTypes.set("Mapbox",new google.maps.ImageMapType({getTileUrl:function(l,n){var e=El(l,n);return e?(Math.pow(2,n),"https://tiles.locationiq.com/v2/obk/r/"+n+"/"+e.x+"/"+e.y+".png?key=ece7de2808b2c0"):null},tileSize:new google.maps.Size(256,256),name:"Mapbox",alt:"Mapbox GL",maxZoom:20})),sl.mapTypes.set("OSM",new google.maps.ImageMapType({getTileUrl:function(l,n){var e=El(l,n);return e?(Math.pow(2,n),"https://tile.openstreetmap.org/"+n+"/"+e.x+"/"+e.y+".png"):null},tileSize:new google.maps.Size(256,256),name:"OSM",alt:"Open Street Map",maxZoom:20})),sl.mapTypes.set("PublicTransport",new google.maps.ImageMapType({getTileUrl:function(l,n){var e=El(l,n);return e?(Math.pow(2,n),"https://tile.memomaps.de/tilegen/"+n+"/"+e.x+"/"+e.y+".png"):null},tileSize:new google.maps.Size(256,256),name:"Public",alt:"Show Public Transport",maxZoom:20})),sl.mapTypes.set("OneMap",new google.maps.ImageMapType({getTileUrl:function(l,n){var e=El(l,n);return e?(Math.pow(2,n),"https://maps-a.onemap.sg/v3/Night/"+n+"/"+e.x+"/"+e.y+".png"):null},tileSize:new google.maps.Size(256,256),name:"One Map",alt:"One Map",maxZoom:20})),pl(cl,z),Ll(Il,O,this.route),google.maps.event.addListener(sl,"mousemove",(function(l){document.getElementById("coordinates-panel").innerHTML=l.latLng.lat()+", "+l.latLng.lng()}));var rl={strokeWeight:0,fillOpacity:.45,editable:!1};function ul(l){return l*(Math.PI/180)}function pl(l,n){d.a.get(n).then((function(n){l(n.data)})).catch((function(l){console.log(l)}))}function cl(l){for(var n=0;n<l.length;n++){var e,t,o,a=l[n],i=a.ZoneID,r=a.Name,u=a.Type,p=a.Perimeter,c=a.Company,d=a.Color,b=a.Location,f=p.split(" "),v="https://chart.apis.google.com/chart?cht=mm&chs=24x32&chco=FFFFFF,"+(16777215*Math.random()<<0).toString(16)+"&ext=.png";if(/\s/.test(p)){if(1==f.length){for(var w=0;w<f.length;w++)e=f[w].split(","),W.Zones={center:new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1])),radius:e[2]};for(var y in W){var M={strokeColor:d,strokeOpacity:.8,strokeWeight:2,fillColor:d,fillOpacity:.35,map:sl,Company:c,Name:r,Pos:f,zoneID:i,center:W[y].center,radius:Math.sqrt(W[y].radius)};o=new google.maps.Circle(M)}F.push(o),google.maps.event.addListener(o,"click",ml),s=new google.maps.InfoWindow,google.maps.event.addListener(o,"click",(function(){sl.panTo(this.position)}))}else if(f.length<=2){var x=f[1],L=f[0].split(","),I=L[0],k=L[1],D=x.split(","),C=D[0],P=D[1],T=dl(C-I),S=dl(P-k),O=Math.sin(T/2)*Math.sin(T/2)+Math.cos(dl(I))*Math.cos(dl(C))*Math.sin(S/2)*Math.sin(S/2),z=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O))*6371*100;for(var E in e=f[0].split(","),Z.Zones={center:new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1])),radius:z},Z){var V={strokeColor:d,strokeOpacity:.8,strokeWeight:2,fillColor:d,fillOpacity:.35,map:sl,Company:c,Name:r,Pos:f,zoneID:i,center:Z[E].center,radius:100*Math.sqrt(Z[E].radius)};t=new google.maps.Circle(V)}B.push(t),google.maps.event.addListener(t,"click",ml),s=new google.maps.InfoWindow,google.maps.event.addListener(t,"click",(function(){sl.panTo(this.position)}))}else if(f.length>=3){for(w=0;w<f.length;w++)e=f[w].split(","),N.push(new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1])));g=new google.maps.Polygon({path:N,strokeColor:d,strokeOpacity:.8,strokeWeight:3,fillColor:d,fillOpacity:.35,Company:c,Name:r,Pos:f,zoneID:i,map:sl}),N=[],Y.push(g),g.setMap(sl),google.maps.event.addListener(g,"click",gl),s=new google.maps.InfoWindow,google.maps.event.addListener(g,"click",(function(){sl.panTo(this.position)}))}}else{var A=l[n].Perimeter.split(","),$=new google.maps.LatLng(parseFloat(A[0]),parseFloat(A[1]));m=new MarkerWithLabel({position:$,draggable:!1,raiseOnDrag:!1,map:sl,icon:v,labelContent:r,labelAnchor:new google.maps.Point(40,0),labelClass:"labels",labelStyle:{opacity:.75},labelInBackground:!1}),q.push(m),h="<div class='form-group' style='color:#4C4C4C;><div class='col-md-8'><h6 class='map-heading'>"+r+"</h6></div><table id='assetDetails' class='table table-vcenter'><tbody><tr><td><span data-l11n class='text-bold'>Location:&nbsp;</span>"+b+"<br /><span data-l11n class='text-bold'>Type:&nbsp;</span>"+u+"<br /><span class='text-bold'>Coordinates:&nbsp;</span>"+p+"</td></tr>",bl(m)}}return l}function dl(l){return l*(Math.PI/180)}function gl(l){this.getPath();var n="<div class='form-group' style='color:#4C4C4C;><div class='col-md-8'><h6 class='map-heading'>"+this.Name+"</h6></div><table id='assetDetails' class='table table-vcenter'><tbody><tr><td><span data-l11n class='text-bold'>Company:&nbsp;</span>"+this.Company+"<br /><span class='text-bold'>Clicked location:&nbsp;</span>"+l.latLng.lat()+","+l.latLng.lng()+"</td></tr>";s.setContent(n),s.setPosition(l.latLng),s.open(sl)}function ml(l){var n="<div class='form-group' style='color:#4C4C4C;><div class='col-md-8'><h6 class='map-heading'>"+this.Name+"</h6></div><table id='assetDetails' class='table table-vcenter'><tbody><tr><td><span data-l11n class='text-bold'>Company:&nbsp;</span>"+this.Company+"<br /><span class='text-bold'>Clicked location:&nbsp;</span>"+l.latLng.lat()+","+l.latLng.lng()+"</td></tr>";s.setContent(n),s.setPosition(l.latLng),s.open(sl)}function bl(l){var n=new google.maps.InfoWindow({content:h});X.push(n),l.addListener("click",(function(){n.open(l.get("map"),l)}))}function fl(){b&&(b.setEditable(!1),b=null)}function hl(l){fl(),b=l,l.setEditable("rectangle"!=l.type)}function vl(){for(var l=0;l<G.length;l++)G[l].overlay.setMap(null);for(G=[],l=0;l<K.length;l++)K[l].close();for(K=[],l=0;l<ll.length;l++)ll[l].setMap(null);ll=[],p.setOptions({drawingControl:!0})}function wl(){if(""==$("#zname").val())alert("Zone name must not be empty");else if(/\s/.test(f))yl("Default");else{var l=new FormData;l.append("email","anthony_agustin@acecom.com.sg"),l.append("password","acecom2015"),$.ajax({async:!0,crossDomain:!0,url:"https://developers.onemap.sg/privateapi/auth/post/getToken",method:"POST",processData:!1,contentType:!1,mimeType:"multipart/form-data",data:l}).done((function(l){var n=JSON.parse(l),e="https://developers.onemap.sg/privateapi/commonsvc/revgeocode?location="+f+"&token="+n.access_token;console.log(e),$.ajax({url:e,type:"GET",success:function(l){if(l.GeocodeInfo.length>0){var e="";null==l.GeocodeInfo[0].BLOCK&&null==l.GeocodeInfo[0].BLOCK||(e=l.GeocodeInfo[0].BLOCK+" "),null==l.GeocodeInfo[0].ROAD&&null==l.GeocodeInfo[0].ROAD||(e+=l.GeocodeInfo[0].ROAD+" "),null==l.GeocodeInfo[0].BUILDINGNAME&&null==l.GeocodeInfo[0].BUILDINGNAME||"null"!=l.GeocodeInfo[0].BUILDINGNAME&&(e+=l.GeocodeInfo[0].BUILDINGNAME),yl(e)}else{var t="https://developers.onemap.sg/privateapi/commonsvc/revgeocode?location="+f+"&token="+n.access_token;console.log(t),$.ajax({url:t,type:"GET",success:function(l){if(0==l.GeocodeInfo.length)console.log("No Address"),yl("No Address");else{var n="";null==l.GeocodeInfo[0].BLOCK&&null==l.GeocodeInfo[0].BLOCK||(n=l.GeocodeInfo[0].BLOCK+" "),null==l.GeocodeInfo[0].ROAD&&null==l.GeocodeInfo[0].ROAD||(n+=l.GeocodeInfo[0].ROAD+" "),null==l.GeocodeInfo[0].BUILDINGNAME&&null==l.GeocodeInfo[0].BUILDINGNAME||"null"!=l.GeocodeInfo[0].BUILDINGNAME&&(n+=l.GeocodeInfo[0].BUILDINGNAME),yl(n)}}})}}})}))}}function yl(l){var n,e=new Date,t=u.utc(e).local().format("DD MMM YYYY, hh:mm:ss A");n=Number(sessionStorage.getItem("setSessionstorageValueRoleID"))>2?{ZoneID:0,Name:$("#zname").val(),TypeID:$("#getZoneTypes").val(),CompanyID:Number(sessionStorage.getItem("setSessionstorageValueUserCompanyID")),CreatedDate:t,Perimeter:f,CellIds:"",Location:l,Created_User:sessionStorage.getItem("setSessionstorageValueUser"),Modified_User:sessionStorage.getItem("setSessionstorageValueUser"),Color:sessionStorage.getItem("setSessionstorageValueZoneColor")}:{ZoneID:0,Name:$("#zname").val(),TypeID:$("#getZoneTypes").val(),CompanyID:sessionStorage.getItem("setSessionstorageValueAssetCompany"),CreatedDate:t,Perimeter:f,CellIds:"",Location:l,Created_UserID:Number(sessionStorage.getItem("setSessionstorageValueUserID")),Modified_UserID:Number(sessionStorage.getItem("setSessionstorageValueUserID")),Color:sessionStorage.getItem("setSessionstorageValueZoneColor")},d.a.post(S,n).then((function(l){console.log(l.data),window.location.reload(!0)})).catch((function(l){console.log(l)}))}function Ml(l){c=l;for(var n=0;n<R.length;++n){var e=R[n];U[e].style.border=e==l?"2px solid #789":"2px solid #fff"}var t=p.get("polylineOptions");t.strokeColor=l,p.set("polylineOptions",t);var o=p.get("rectangleOptions");o.fillColor=l,p.set("rectangleOptions",o);var a=p.get("circleOptions");a.fillColor=l,p.set("circleOptions",a);var s=p.get("polygonOptions");s.fillColor=l,p.set("polygonOptions",s),sessionStorage.setItem("setSessionstorageValueZoneColor",c)}function xl(l){var n=document.createElement("span");return n.className="color-button",n.style.backgroundColor=l,google.maps.event.addDomListener(n,"click",(function(){Ml(l),function(l){b&&(b.type==google.maps.drawing.OverlayType.POLYLINE?b.set("strokeColor",l):b.set("fillColor",l))}(l)})),n}function Ll(l,n,e){d.a.get(n).then((function(n){l(n.data,e)})).catch((function(l){console.log(l)}))}function Il(l,n){for(var e=0,o=0,s=0,p=0,c=new google.maps.LatLngBounds,d=0,g=l.length;d<g;d++)if(l[d]){if(null==l[d].LastPos||null==l[d].LastPos.Engine||0==l[d].LastPos.PosID||""===l[d].LastPos){console.log("Data is Null"),p++;continue}var m=l[d],b=new google.maps.LatLng(l[d].LastPos.PosY,l[d].LastPos.PosX),f=l[d].AssetID,h=l[d].Tag,v=l[d].Category,w=l[d].Name,y=l[d].Gps,M=l[d].Gprs,x=l[d].Engine,L=l[d].LastPos.Fix,I=l[d].Make,k=l[d].Model,D=l[d].LicensePlate,C=l[d].LastPos.Location,P=l[d].LastPos.Speed,T=l[d].LastPos.Course,S=l[d].LastPos.Zone,O=l[d].LastPos.Mileage,z=l[d].LastPos.Timestamp,A=l[d].LastPos.Battery.toFixed(2),N=l[d].Name.match(/.{1,28}/g).join("<br/>").substring(0,18),Y=l[d].LastPos.PosX,B=l[d].LastPos.PosY,F=u.utc(z).local().format("DD MMM YYYY"),G=new Date,R=u.utc(G).local().format("DD MMM YYYY");R=Date.parse(R),F=Date.parse(F);var U=u.utc(z).local().format("D-MMM-YYYY, hh:mm:ss A"),H=Tl(u.utc(z).local().format()),Z=void 0;switch(v){case"Car":Z="assets/img/car.jpg";break;case"Truck":Z="assets/img/truck.jpg";break;case"Van":Z="assets/img/van.jpg";break;case"Bus":Z="assets/img/bus.jpg";break;case"Motorcycle":Z="assets/img/motorcycle.jpg";break;case"Recovery Veh":case"Lorry":case"10 Footer Lorry":case"14 Footer Lorry":Z="assets/img/truck.jpg";break;case"Ambulance":Z="assets/img/ambulance.jpg"}var W,j,J=void 0;"MOVE"==x?J="#5cb85c":"IDLE"==x?J="#f0ad4e":"STOP"==x&&R>F?J="#696969":"STOP"==x&&(J="#d9534f"),W={path:"M17.402,0H5.643C2.526,0,0,3.467,0,6.584v34.804c0,3.116,2.526,5.644,5.643,5.644h11.759c3.116,0,5.644-2.527,5.644-5.644 V6.584C23.044,3.467,20.518,0,17.402,0z M22.057,14.188v11.665l-2.729,0.351v-4.806L22.057,14.188z M20.625,10.773 c-1.016,3.9-2.219,8.51-2.219,8.51H4.638l-2.222-8.51C2.417,10.773,11.3,7.755,20.625,10.773z M3.748,21.713v4.492l-2.73-0.349 V14.502L3.748,21.713z M1.018,37.938V27.579l2.73,0.343v8.196L1.018,37.938z M2.575,40.882l2.218-3.336h13.771l2.219,3.336H2.575z M19.328,35.805v-7.872l2.729-0.355v10.048L19.328,35.805z",scale:.6,strokeColor:J,strokeWeight:1,strokeOpacity:1,fillOpacity:1,fillColor:"white",offset:"5%",rotation:T,anchor:new google.maps.Point(10,25)},j=null==m.Driver.Name?"No Driver Assigned":m.Driver.Name,"MOVE"==x?e++:"IDLE"==x?o++:"STOP"==x&&R>F?p++:"STOP"==x&&s++;var q="<div id='assetInfo' class='form-group row' style='padding:0px !important;'>";q+="Unknown"!==D?"<div class='col-md-8'><h6 class='map-heading'>"+N+" - ("+D+")</h6></div>":"<div class='col-md-8'><h6 class='map-heading'>"+N+"</h6></div>",q+="<div class='col-md-4'><p style='text-align:right; padding-right:30px; padding-bottom:0px !important'>"+Dl(y,U)+"&nbsp;"+Cl(M,U)+"</p></div>",q+="<table id='assetDetails' class='table table-vcenter'><tbody><tr><td colspan='2'>",q+="<span class='font-weight-bold'>Address:&nbsp;</span>"+C+"<br /><span class='font-weight-bold'>Date:&nbsp;</span>"+U+"<br /><span>Speed:&nbsp;</span>"+Pl(P)+"<br /><span class='font-weight-bold'>GPS Status:&nbsp;</span>"+L+"<br /><span class='font-weight-bold'>Driver:&nbsp;</span>"+j+"<br /><span class='font-weight-bold'>Zones:&nbsp;</span>"+S+"<br /><span class='font-weight-bold'>Last Updated:&nbsp;</span>"+H+"<br /></td><td colspan='2' class='pl-4'><img class='vehicle-img' src='"+Z+"'/><br />","Unknown"!==I&&(q+="<span class='font-weight-bold'>Brand:&nbsp;</span>"+I+"<br />"),"Unknown"!==k&&(q+="<span class='font-weight-bold'>Model:&nbsp;</span>"+k+"<br />"),(t=kl({map:sl,position:b,icon:W,shape:nl,category:v,cat_img:Z,address:C,vechs:w,tag:h,id:f,gps:y,gprs:M,title:w,zone:S,fix:L,engine:x,speed:P,mileage:O,timestamp:U,course:T,color:J,getYPosition:B,getXPosition:Y,assetBattery:A,content:q+="</td></tr></tbody></table></div></div>",driver:j,elapsed_timestamp:H})).setMap(sl),a=new StyledMarker({styleIcon:new StyledIcon(el.BUBBLE,{color:"#458FD2",text:w,fore:"#FFFFFF"}),position:b,map:sl,shadow:"none"}),E[d]&&E[d].setPosition?($("#assetStatus").empty(),t.setMap(null),a.setMap(null),E[d].setPosition(b),V[d].setPosition(b),E[d].setIcon(W),r==w?(E[d].id=f,E[d].content=q,E[d].address=C,E[d].timestamp=U,E[d].gps=y,E[d].gprs=M,E[d].engine=x,E[d].fix=L,E[d].tag=h,E[d].speed=P,E[d].cat_img=Z,E[d].driver=j,E[d].elapsed_timestamp=H,null==$("#assetInfo").val()&&null==$("#assetInfo").val()||(document.getElementById("assetInfo").innerHTML=q)):(E[d].id=f,E[d].content=q,E[d].address=C,E[d].timestamp=U,E[d].gps=y,E[d].gprs=M,E[d].engine=x,E[d].fix=L,E[d].tag=h,E[d].speed=P,E[d].cat_img=Z,E[d].driver=j,E[d].elapsed_timestamp=H)):(c.extend(b),E[d]=t,V[d]=a)}if(_&&(sl.setZoom(7),sl.fitBounds(c),_=!1),"/vrp/tsp"==n){var K=document.getElementById("assetStatus");if(K){for(i=0;i<E.length;i++)(null!=E[i]||E[i])&&(K.innerHTML+="<tr><td><strong><a class='openTrackingModal' style='color:#458FD2;'>"+E[i].id+"</a></strong></td><td><strong>"+E[i].title+"</strong></td><td>"+E[i].address+"</td><td>"+E[i].timestamp+"</td><td>"+E[i].elapsed_timestamp+"</td><td>"+Pl(E[i].speed)+"</td><td>"+E[i].driver+"</td><td>"+E[i].fix+"</td><td>"+Sl(E[i].engine,E[i].timestamp)+"</td><td>"+Dl(E[i].gps,E[i].timestamp)+"</td><td>"+Cl(E[i].gprs,E[i].timestamp)+"</td></tr>");document.getElementById("total-vehicles").innerHTML=l.length,document.getElementById("getMove").innerHTML=e.toString(),document.getElementById("getIdle").innerHTML=o.toString(),document.getElementById("getStop").innerHTML=s.toString(),document.getElementById("getDown").innerHTML=p.toString()}}}function kl(l){var n=new google.maps.Marker({id:l.id,map:l.map,position:l.position,title:l.title,category:l.category,address:l.address,timestamp:l.timestamp,vechs:l.vechs,gps:l.gps,gprs:l.gprs,zone:l.zone,engine:l.engine,speed:l.speed,fix:l.fix,driver:l.driver,icon:{path:"M17.402,0H5.643C2.526,0,0,3.467,0,6.584v34.804c0,3.116,2.526,5.644,5.643,5.644h11.759c3.116,0,5.644-2.527,5.644-5.644 V6.584C23.044,3.467,20.518,0,17.402,0z M22.057,14.188v11.665l-2.729,0.351v-4.806L22.057,14.188z M20.625,10.773 c-1.016,3.9-2.219,8.51-2.219,8.51H4.638l-2.222-8.51C2.417,10.773,11.3,7.755,20.625,10.773z M3.748,21.713v4.492l-2.73-0.349 V14.502L3.748,21.713z M1.018,37.938V27.579l2.73,0.343v8.196L1.018,37.938z M2.575,40.882l2.218-3.336h13.771l2.219,3.336H2.575z M19.328,35.805v-7.872l2.729-0.355v10.048L19.328,35.805z",scale:.6,strokeColor:l.color,strokeWeight:1,strokeOpacity:1,fillOpacity:1,fillColor:"white",offset:"5%",rotation:l.course,anchor:new google.maps.Point(10,25)},shape:l.shape,content:l.content,tag:l.tag,cat_img:l.cat_img,elapsed_timestamp:l.elapsed_timestamp});return l.content&&google.maps.event.addListener(n,"click",(function(){for(var n=0;n<A.length;n++)A[n].close();A=[],this.getMap().newMarker||(o=this.getMap().newMarker=new google.maps.InfoWindow({zIndex:999999}),A.push(o),google.maps.event.addListener(o,"domready",(function(){$("#submitdest").click((function(){return n=l.address,M=$("#destination").val(),y="https://www.google.com/maps/dir/"+n+"/"+M,void(0==new String($("#destination").val()).length?alert("Your Destination is empty!"):window.open(y,"newwindow"));var n}))})));var e=this.content;e+="<div class='form-group row col-md-12 form-inline' id='assetRoutes'><div class='col-md-2'><span class='text-bold'>Route Info:&nbsp;</span></div><div class='col-md-6' style='background-color:black !important;'>"+'<input id="destination" type="text" class="form-control form-control-sm" placeholder="Enter Destination"></div><div class=\'col-md-3\' style=\'margin-left:10px;\'><button id="submitdest" class="btn btn-block btn-primary">Search</button></div></div>',this.getMap().newMarker.setContent(e),this.getMap().newMarker.open(this.getMap(),this),this.getMap().setCenter(this.position),r=l.title})),n}function Dl(l,n){var e=new Date,t=u.utc(e).local().format("D-MMM-YYYY"),o=u(n,"D-MMM-YYYY").format("D-MMM-YYYY");return"<i class='fa fa-map-marker "+(t>o?"down":l>=2?"move":l<2&&t==o?"stop":"down")+"' title='GPS'></i>"}function Cl(l,n){var e=new Date,t=u.utc(e).local().format("D-MMM-YYYY"),o=u(n,"D-MMM-YYYY").format("D-MMM-YYYY");return"<i class='fa fa-signal "+(t>o?"down":0==l?"move":1==l?"idle":2==l&&t==o?"stop":"down")+"' title='3G'></i>"}function Pl(l){return Math.round(100*l)/100+" km/h"}function Tl(l){var n=u().format(),e=u.duration(u(n).diff(u(l))),t=parseInt(e.asDays()),o=parseInt(e.asHours());o-=24*t;var a=parseInt(e.asMinutes());return a-=24*t*60+60*o,0==t&&0==o&&0==a?"a moment ago":0==t?o+" hours "+a+" minutes ago":1==t?t+" day "+o+" hours "+a+" minutes ago":t+" days "+o+" hours "+a+" minutes ago"}function Sl(l,n){var e,t,o=new Date,a=u.utc(o).local().format("D-MMM-YYYY"),s=u(n,"D-MMM-YYYY").format("D-MMM-YYYY");return a>s?(t="down",e="DOWN"):"MOVE"==l?(t="move",e="MOVE"):"IDLE"==l?(t="idle",e="IDLE"):"STOP"==l&&a==s?(t="stop",e="STOP"):(t="down",e="DOWN"),"<span style='padding: 4px; color:white;' class='"+t+"'>"+e+"</span>"}function Ol(){for(var l=0;l<E.length;l++)E[l]&&E[l].setMap(null);for(E=[],l=0;l<V.length;l++)V[l]&&V[l].setMap(null);for(V=[],l=0;l<A.length;l++)A[l]&&A[l].close();A=[]}function zl(){for(var l=0;l<Y.length;l++)Y[l].setMap(null);for(l=0;l<B.length;l++)B[l].setMap(null);for(l=0;l<J.length;l++)J[l].setMap(null);for(J=[],l=0;l<K.length;l++)K[l].close();for(K=[],l=0;l<q.length;l++)q[l].setMap(null);for(q=[],l=0;l<G.length;l++)G[l].overlay.setMap(null);for(G=[],l=0;l<ll.length;l++)ll[l].setMap(null);ll=[],p.setOptions({drawingControl:!0})}function El(l,n){var e=l.y,t=l.x,o=1<<n;return e<0||e>=o?null:((t<0||t>=o)&&(t=(t%o+o)%o),{x:t,y:e})}(p=new google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.BOTTOM_CENTER,drawingModes:[google.maps.drawing.OverlayType.CIRCLE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.RECTANGLE]},markerOptions:{draggable:!0},polylineOptions:{editable:!0},rectangleOptions:rl,circleOptions:rl,polygonOptions:rl,map:sl})).setMap(sl),function(){for(var l=document.getElementById("color-palette"),n=0;n<R.length;++n){var e=R[n],t=xl(e);l.appendChild(t),U[e]=t}Ml(R[0])}(),google.maps.event.addListener(p,"overlaycomplete",(function(l){if(vl(),G.push(l),l.type==google.maps.drawing.OverlayType.CIRCLE&&l.overlay.getRadius(),l.type!=google.maps.drawing.OverlayType.MARKER){p.setDrawingMode(null),p.setOptions({drawingControl:!1});var n=l.overlay;n.type=l.type,google.maps.event.addListener(n,"click",(function(){hl(n)})),hl(n)}if(l.type==google.maps.drawing.OverlayType.MARKER){var e=l.overlay.getPosition();console.log(e)}})),google.maps.event.addListener(p,"drawingmode_changed",fl),google.maps.event.addListener(sl,"click",fl),google.maps.event.addListener(p,"polygoncomplete",(function(l){H.push(l),function(){console.log(l.getPath().getArray());for(var n,e=l.getPath().getArray().toString().replace(/\ /g,"").replace(/\(/g,"").replace(/\),/g," "),t=(f=e.replace(/\)/g,"")).split(" "),o=0;o<t.length;o++)n=t[0].split(",");var a=new google.maps.LatLng(parseFloat(n[0]),parseFloat(n[1])),s=new google.maps.InfoWindow({content:document.getElementById("infobubbleDrawing")});K.push(s),s.setPosition(a),s.open(sl),document.getElementById("infobubbleDrawing").style.display="block",$("#panel").show(),google.maps.event.addListener(s,"closeclick",(function(){vl(),$("#panel").hide()}))}(),google.maps.event.addDomListener(document.getElementById("savebutton"),"click",wl)})),google.maps.event.addListener(p,"circlecomplete",(function(l){var n,e,t;j.push(l);for(var a=0;a<j.length;a++){n=j[a].getCenter(),e=j[a].getRadius(),google.maps.LatLng.prototype.destinationPoint=function(l,n){n/=6371,l=ul(l);var e=ul(this.lat()),t=ul(this.lng()),o=Math.asin(Math.sin(e)*Math.cos(n)+Math.cos(e)*Math.sin(n)*Math.cos(l)),a=t+Math.atan2(Math.sin(l)*Math.sin(n)*Math.cos(e),Math.cos(n)-Math.sin(e)*Math.sin(o));return isNaN(o)||isNaN(a)?null:new google.maps.LatLng(ul(o),a*(180/Math.PI))};var s=e/1e3,i=(t=new google.maps.LatLng(n.lat(),n.lng())).destinationPoint(90,s).toString().replace(/\ /g,"").replace(/\(/g,"").replace(/\),/g," ").replace(/\)/g,"");f=n.lat()+","+n.lng()+" "+i}$.getJSON(T,(function(l){$.each(l,(function(l,n){$("#getZoneTypes").append($("<option></option>").val(n.ZoneTypeID).html(n.Name))}))})),o=new google.maps.InfoWindow({content:'<div class="form-group row"><div style="padding-top: 10px;"><h6 style="color:#4286CF; padding-bottom:10px;"><i class="fa fa-map-marker fa-lg" style="color: cornflowerblue; font-size: 1.5em;"></i> Save Zone </h6 ></div><table style="width:100%"><tbody><tr><th><div class="col-sm-12 form-group"><div class=".text-normal"> Zone Name </div><input class="form-control" id="zname" name="zname" placeholder="Enter Zone Name" type="text" style="color:black !important;"></div></th></tr><tr><th><div style="padding: 10px 0 10px 0;"></div></th></tr><tr><th><div class="col-sm-12 form-group"><div class=".text-normal"> Zone Type </div><select class="form-control" data-live-search="true" data-width="100%" id="getZoneTypes" name="getZoneTypes" style="background-color:#2F343B; color:azure;"></select > </div></th ></tr><tr><th><div style="padding: 10px 0 10px 0;"></div></th></tr><tr><th><button id="savebutton" class="btn-dark btn btn-md pull-right"> Submit </button></th></tr></tbody></table></div>'}),K.push(o),o.setPosition(t),o.open(sl),$("#panel").show(),google.maps.event.addListener(o,"closeclick",(function(){vl(),$("#panel").hide()})),google.maps.event.addListener(o,"domready",(function(){$("#savebutton").click((function(){return wl()}))}))})),google.maps.event.addListener(p,"markercomplete",(function(l){var n;J.push(l);for(var e=0;e<J.length;e++){var t=(n=J[e].getPosition()).toString().replace(/\ /g,"").replace(/\(/g,"").replace(/\),/g," ");f=t.replace(/\)/g,"")}var o=new google.maps.InfoWindow({content:document.getElementById("infobubbleDrawing")});K.push(o),o.setPosition(n),o.open(sl),document.getElementById("infobubbleDrawing").style.display="block",$("#panel").hide(),google.maps.event.addListener(o,"closeclick",(function(){!function(){for(var l=0;l<J.length;l++)J[l].setMap(null);for(J=[],l=0;l<G.length;l++)G[l].overlay.setMap(null);for(G=[],l=0;l<K.length;l++)K[l].close();K=[],p.setOptions({drawingControl:!0})}(),$("#panel").hide()})),google.maps.event.addDomListener(document.getElementById("savebutton"),"click",wl)})),google.maps.event.addListener(p,"rectanglecomplete",(function(l){Q.push(l);var n=l.getBounds(),e=n.getNorthEast(),t=n.getSouthWest(),o=new google.maps.LatLng(e.lat(),t.lng()),a=new google.maps.LatLng(t.lat(),e.lng());v=new google.maps.Marker({map:sl,position:new google.maps.LatLng(e.lat(),t.lng()),draggable:!1,title:"Drag me!"}),w=new google.maps.Marker({map:sl,position:new google.maps.LatLng(t.lat(),e.lng()),draggable:!1,title:"Drag me!"}),ll.push(v,w);for(var s=(o+","+t+","+a+","+e).replace(/\ /g,"").replace(/\(/g,"").replace(/\),/g," "),i=(f=s.replace(/\)/g,"")).split(" "),r=0;r<i.length;r++)i[0].split(",");var u=new google.maps.LatLng(e.lat(),t.lng()),p=new google.maps.InfoWindow({content:document.getElementById("infobubbleDrawing")});K.push(p),p.setPosition(u),p.open(sl),document.getElementById("infobubbleDrawing").style.display="block",$("#panel").show(),google.maps.event.addListener(p,"closeclick",(function(){vl(),$("#panel").hide()})),sessionStorage.setItem("setSessionstorageValuePerimeterLength",String(4)),google.maps.event.addDomListener(document.getElementById("savebutton"),"click",wl)})),x=setInterval((function(){Ll(Il,O,l.route)}),1e4),$("#assetStatus").on("click","a.openTrackingModal",(function(l){$("#trackingModal").modal("show");var n,e=L+I+"assetinfo/"+l.target.innerHTML,t=new Array,o=new google.maps.LatLng(1.3521,103.8198),a=new google.maps.LatLngBounds,s=!0,i={zoom:12,center:o,panControl:!1,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,fullscreenControlOptions:{position:google.maps.ControlPosition.TOP_LEFT},scaleControl:!1,overviewMapControl:!1},r=new google.maps.Map(document.getElementById("map-asset"),i);function p(l,n){d.a.get(n).then((function(n){l(n.data)})).catch((function(l){console.log(l)}))}function c(l){if(l)if(null==l.LastPos||null==l.LastPos.Engine||0==l.LastPos.PosID||""===l.LastPos)console.log("Data is Null");else{var e=new google.maps.LatLng(l.LastPos.PosY,l.LastPos.PosX),o=l.AssetID,i=l.Tag,p=l.Category,c=l.Name,d=l.Gps,g=l.Gprs,m=l.Engine,b=l.LastPos.Fix,f=l.Make,h=l.Model,v=l.LicensePlate,w=l.LastPos.Location,y=l.LastPos.Speed,M=l.LastPos.Course,x=l.LastPos.Zone,L=l.LastPos.Timestamp,I=(l.LastPos.Battery.toFixed(2),l.Name.match(/.{1,28}/g).join("<br/>").substring(0,18)),k=u.utc(L).local().format("DD MMM YYYY"),D=new Date,C=u.utc(D).local().format("DD MMM YYYY");C=Date.parse(C),k=Date.parse(k);var P=u.utc(L).local().format("D-MMM-YYYY, hh:mm:ss A"),T=Tl(u.utc(L).local().format()),S=void 0;switch(p){case"Car":S="assets/img/car.jpg";break;case"Truck":S="assets/img/truck.jpg";break;case"Van":S="assets/img/van.jpg";break;case"Bus":S="assets/img/bus.jpg";break;case"Motorcycle":S="assets/img/motorcycle.jpg";break;case"Recovery Veh":case"Lorry":case"10 Footer Lorry":case"14 Footer Lorry":S="assets/img/truck.jpg";break;case"Ambulance":S="assets/img/ambulance.jpg"}var O,z,V=void 0;"MOVE"==m?V="#5cb85c":"IDLE"==m?V="#f0ad4e":"STOP"==m&&C>k?V="#696969":"STOP"==m&&(V="#d9534f"),O={path:"M17.402,0H5.643C2.526,0,0,3.467,0,6.584v34.804c0,3.116,2.526,5.644,5.643,5.644h11.759c3.116,0,5.644-2.527,5.644-5.644 V6.584C23.044,3.467,20.518,0,17.402,0z M22.057,14.188v11.665l-2.729,0.351v-4.806L22.057,14.188z M20.625,10.773 c-1.016,3.9-2.219,8.51-2.219,8.51H4.638l-2.222-8.51C2.417,10.773,11.3,7.755,20.625,10.773z M3.748,21.713v4.492l-2.73-0.349 V14.502L3.748,21.713z M1.018,37.938V27.579l2.73,0.343v8.196L1.018,37.938z M2.575,40.882l2.218-3.336h13.771l2.219,3.336H2.575z M19.328,35.805v-7.872l2.729-0.355v10.048L19.328,35.805z",scale:.6,strokeColor:V,strokeWeight:1,strokeOpacity:1,fillOpacity:1,fillColor:"white",offset:"5%",rotation:M,anchor:new google.maps.Point(10,25)},z=null==l.Driver.Name?"No Driver Assigned":l.Driver.Name;var A="<div id='assetInfo' class='form-group row' style='padding:0px !important;'>";A+="Unknown"!==v?"<div class='col-md-8'><h6 class='map-heading'>"+I+" - ("+v+")</h6></div>":"<div class='col-md-8'><h6 class='map-heading'>"+I+"</h6></div>",A+="<div class='col-md-4'><p style='text-align:right; padding-right:30px; padding-bottom:0px !important'>"+Dl(d,P)+"&nbsp;"+Cl(g,P)+"</p></div>",A+="<table id='assetDetails' class='table table-vcenter'><tbody><tr><td colspan='2'>",A+="<span class='font-weight-bold'>Address:&nbsp;</span>"+w+"<br /><span class='font-weight-bold'>Date:&nbsp;</span>"+P+"<br /><span>Speed:&nbsp;</span>"+Pl(y)+"<br /><span class='font-weight-bold'>GPS Status:&nbsp;</span>"+b+"<br /><span class='font-weight-bold'>Driver:&nbsp;</span>"+z+"<br /><span class='font-weight-bold'>Zones:&nbsp;</span>"+x+"<br /><span class='font-weight-bold'>Last Updated:&nbsp;</span>"+T+"<br /></td><td colspan='2' class='pl-4'><img class='vehicle-img' src='"+S+"'/><br />","Unknown"!==f&&(A+="<span class='font-weight-bold'>Brand:&nbsp;</span>"+f+"<br />"),"Unknown"!==h&&(A+="<span class='font-weight-bold'>Model:&nbsp;</span>"+h+"<br />"),A+="</td></tr></tbody></table></div></div>",(n=new google.maps.Marker({id:o,map:r,position:e,title:c,category:p,address:w,timestamp:P,vechs:c,gps:d,gprs:g,zone:x,engine:m,speed:y,fix:b,driver:z,icon:{path:"M17.402,0H5.643C2.526,0,0,3.467,0,6.584v34.804c0,3.116,2.526,5.644,5.643,5.644h11.759c3.116,0,5.644-2.527,5.644-5.644 V6.584C23.044,3.467,20.518,0,17.402,0z M22.057,14.188v11.665l-2.729,0.351v-4.806L22.057,14.188z M20.625,10.773 c-1.016,3.9-2.219,8.51-2.219,8.51H4.638l-2.222-8.51C2.417,10.773,11.3,7.755,20.625,10.773z M3.748,21.713v4.492l-2.73-0.349 V14.502L3.748,21.713z M1.018,37.938V27.579l2.73,0.343v8.196L1.018,37.938z M2.575,40.882l2.218-3.336h13.771l2.219,3.336H2.575z M19.328,35.805v-7.872l2.729-0.355v10.048L19.328,35.805z",scale:.6,strokeColor:V,strokeWeight:1,strokeOpacity:1,fillOpacity:1,fillColor:"white",offset:"5%",rotation:M,anchor:new google.maps.Point(10,25)},shape:nl,content:A,tag:i,cat_img:S,elapsed_timestamp:T})).setMap(r),n.content&&(google.maps.event.addListener(n,"click",(function(){this.getMap().newMarker=new google.maps.InfoWindow({zIndex:999999}),this.getMap().newMarker.setContent(this.content),this.getMap().newMarker.open(this.getMap(),this),this.getMap().setCenter(this.position),r.panTo(this.getPosition())})),n.getMap().newMarker=new google.maps.InfoWindow({zIndex:999999}),n.getMap().newMarker.setContent(n.content),n.getMap().newMarker.open(n.getMap(),n),n.getMap().setCenter(n.position),r.panTo(n.getPosition())),t[0]&&t[0].setPosition?(n.setMap(null),t[0].setPosition(e),t[0].setIcon(O),t[0].id=o,t[0].content=A,t[0].address=w,t[0].timestamp=P,t[0].gps=d,t[0].gprs=g,t[0].engine=m,t[0].fix=b,t[0].tag=i,t[0].speed=y,t[0].cat_img=S,E[0].driver=z,t[0].elapsed_timestamp=T):(a.extend(e),r.setZoom(7),t[0]=n),s&&(r.setZoom(7),r.fitBounds(a),s=!1,$("#trackingFormTitle").text(c))}}p(c,e),x=setInterval((function(){p(c,e)}),1e4)})),$(".SelectResellerFilter").on("change",(function(){clearInterval(x),Ol(),zl()})),$(".SelectCompanyFilter").change({route:this.route},(function(l){clearInterval(x),Ol(),zl();var n=function(l,n,e,t){var o;return 1==l?o=n+e+"zoneinfo?ResellerID="+$("#load-reseller").val()+"&CompanyID="+$("#load-company").val():2==l?o=n+e+"zoneinfo?ResellerID="+t+"&CompanyID="+$("#load-company").val():l>=3&&(o=n+e+"zoneinfo?ResellerID="+t+"&CompanyID="+$("#load-company").val()),o}(P,L,I,D),e=function(l,n,e,t,o){var a;return 1==l?a=n+e+"assetinfo?UserID=&ResellerID="+$("#load-reseller").val()+"&CompanyID="+$("#load-company").val():2==l?a=n+e+"assetinfo?UserID="+t+"&ResellerID="+o+"&CompanyID="+$("#load-company").val():l>=3&&(a=n+e+"assetinfo?UserID="+t+"&ResellerID="+o+"&CompanyID="+$("#load-company").val()),a}(P,L,I,k,D);pl(cl,n),Ll(Il,e,l.data.route),x=setInterval((function(){Ll(Il,e,l.data.route)}),1e4)})),$(".SelectAssetFilter").on("change",(function(){var l=$(this).find("option:selected").val();for(i=0;i<E.length;i++)t=E[i],E[i]&&t.id==l&&google.maps.event.trigger(E[i],"click")})),this.spinner.hide()},l}(),M=t.ub({encapsulation:2,styles:[["#map-canvas{position:relative;margin:0 auto;padding:0;overflow:hidden;max-width:none!important;box-shadow:none!important}.gmap-control-container{margin:10px 5.3px 5.3px -6px;padding-left:2px;padding-right:2px}.gmap-control{cursor:pointer;background-color:-moz-linear-gradient(center top,#fefefe,#f3f3f3);background-color:#fefefe!important;border:1px solid #a9bbdf;border-radius:2px;padding:0 6px;line-height:160%;font-size:11px;font-family:Arial,sans-serif;box-shadow:2px 2px 3px rgba(0,0,0,.35);-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;-ms-user-select:none;user-select:none}.gmap-control-active,.gmap-control:hover{border:1px solid #678ac7}.gmap-control-active{background-color:-moz-linear-gradient(center top,#6d8acc,#7b98d9)!important;background-color:#6d8acc!important;color:#fff;font-weight:700}.gmap-control-legend{position:absolute;text-align:left;z-index:-1;top:20px;left:0;width:150px;height:86px;font-size:10px;background:#fefefe;border:1px solid #a9bbdf;padding:10px;box-shadow:2px 2px 3px rgba(0,0,0,.35)}.gmap-control-legend ul{margin:0;padding:0;list-style-type:none}.gmap-control-legend li{line-height:160%}.controls{margin-top:7px;border:1px solid transparent;border-radius:2px 0 0 2px;box-sizing:border-box;-moz-box-sizing:border-box;height:32px;outline:none;box-shadow:0 2px 6px rgba(0,0,0,.3)}#pac-input-from,#pac-input-to{background-color:#fff;font-family:Roboto;font-size:12px;font-weight:300;padding:0 11px 0 13px;text-overflow:ellipsis;width:300px}#pac-input,#pac-inputEN{background-color:#fff;font-family:Roboto;font-size:12px;font-weight:300;margin-left:12px;padding:0 11px 0 13px;text-overflow:ellipsis;width:300px}#pac-inputEN:focus{border-color:#4d90fe}.pac-container{font-family:Roboto}#type-selector{color:#fff;background-color:#4d90fe;padding:5px 11px 0}#type-selector label{font-family:Roboto;font-size:13px;font-weight:300}#pac-input:focus{border-color:#4d90fe}#target{width:345px}#hideDetails,#showDetails{cursor:pointer}.gm-style .gm-style-iw{top:0!important;left:0!important;max-width:450px!important;padding-top:10px;padding-right:10px;padding-bottom:10px!important;display:block!important;overflow:visible!important}.gm-style .gm-style-iw,.gm-style .gm-style-pbc{background-color:#1e1e24!important}.gm-style .gm-style-iw #google-popup p{padding:10px}.gm-style div div div div div div div div{background-color:#1e1e24!important;margin:0;padding:0;top:0;color:#fff;font-size:12px;overflow:hidden!important}.poi-info-window a:link{text-decoration:none;color:#97d8ff!important;background:none!important}.gm-style div div div div div div div div a{color:#f1f1f1;font-weight:700}.gm-style .gm-style-iw-t:after{background:linear-gradient(45deg,#3b3f48 50%,hsla(0,0%,100%,0) 51%,hsla(0,0%,100%,0))!important;background-color:transparent}.gm-style img.vehicle-img{width:120px;text-align:center;padding-bottom:10px}.gm-style .gm-style-iw-d{overflow:visible}.gm-ui-hover-effect{background-color:#fff!important;opacity:.9;top:0!important;right:0!important;width:15px!important;height:15px!important;margin-top:0!important;margin-right:0!important}.gm-ui-hover-effect img{margin:1px!important}.input-map{padding:.285rem .75rem!important;background-color:#eaeaea!important;color:#495057!important;font-size:12px!important}.info-table{font-size:13px;line-height:1.57}.info-table i{color:#fff;border-radius:4px;padding:5px 8px;font-size:13px}.move{background-color:#2b7c21}.stop{background-color:#b60003}.idle{background-color:#fea82c}.down{background-color:#696969}.form-inline .form-control{width:100%}.form-control,.form-control:focus{background-color:#fff}.form-control:focus{border-color:#46b1ff}button.gm-ui-hover-effect{margin-top:10px!important;margin-right:10px!important}.labels{color:#fff;background-color:#000;font-family:Lucida Grande,Arial,sans-serif;font-size:10px;text-align:center;width:100px;white-space:nowrap}#panel{width:200px;font-family:Arial,sans-serif;font-size:13px;float:right;margin:10px;padding:8px 8px 10px 10px;background-color:#404040;width:auto}#color-palette{clear:both}.color-button{width:14px;height:14px;font-size:0;margin:2px;float:left;cursor:pointer}nav#map-toggle button{position:absolute;left:-120px;top:70px}nav#map-toggle button i{margin-top:-2px}.open-close-container label,.open-close-container p{font-size:12px!important}.open-close-container{position:absolute;z-index:999999;right:0;top:0;height:100%;padding:5px;color:#eaeaea;font-size:14px!important}#assetStatus{font-size:12px;color:#000!important}#assetStatus i.fa{width:28px;height:24px;padding-top:5px;text-align:center;border-radius:2px;color:#fff!important}#assetStatus .vehicle-img{width:30px}#assetInfo #assetDetails{color:#fff!important;margin-bottom:0}#assetInfo p i.fa{padding:3px 4px;border-radius:2px}"]],data:{}});function x(l){return t.Yb(0,[(l()(),t.wb(0,0,null,null,3,"ngx-spinner",[["bdColor","rgba(51, 51, 51, 0.96)"],["size","medium"],["type","ball-spin-clockwise"]],null,null,null,i.b,i.a)),t.vb(1,770048,null,0,r.a,[r.c,t.h],{bdColor:[0,"bdColor"],size:[1,"size"],type:[2,"type"]},null),(l()(),t.wb(2,0,null,0,1,"p",[["style","color: white"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Please Wait. "])),(l()(),t.wb(4,0,null,null,124,"div",[["class","animated fadeIn"]],null,null,null,null,null)),(l()(),t.wb(5,0,null,null,48,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.wb(6,0,null,null,11,"div",[["class","col-sm-6 col-lg-3"]],null,null,null,null,null)),(l()(),t.wb(7,0,null,null,10,"div",[["class","brand-card"]],null,null,null,null,null)),(l()(),t.wb(8,0,null,null,5,"div",[["class","card-body pb-3 bg-success"]],null,null,null,null,null)),(l()(),t.wb(9,0,null,null,1,"div",[["class","btn-group float-right"]],null,null,null,null,null)),(l()(),t.wb(10,0,null,null,0,"i",[["class","fa fa-car fa-2x"]],null,null,null,null,null)),(l()(),t.wb(11,0,null,null,0,"div",[["class","text-value"],["id","getMove"]],null,null,null,null,null)),(l()(),t.wb(12,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["MOVE"])),(l()(),t.wb(14,0,null,null,3,"div",[["class","brand-card-body"]],null,null,null,null,null)),(l()(),t.wb(15,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.wb(16,0,null,null,1,"div",[["class","text-uppercase text-muted small"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Status when vehicle is MOVING"])),(l()(),t.wb(18,0,null,null,11,"div",[["class","col-sm-6 col-lg-3"]],null,null,null,null,null)),(l()(),t.wb(19,0,null,null,10,"div",[["class","brand-card"]],null,null,null,null,null)),(l()(),t.wb(20,0,null,null,5,"div",[["class","card-body pb-3 bg-warning"]],null,null,null,null,null)),(l()(),t.wb(21,0,null,null,1,"div",[["class","btn-group float-right"]],null,null,null,null,null)),(l()(),t.wb(22,0,null,null,0,"i",[["class","fa fa-car fa-2x"]],null,null,null,null,null)),(l()(),t.wb(23,0,null,null,0,"div",[["class","text-value"],["id","getIdle"]],null,null,null,null,null)),(l()(),t.wb(24,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["IDLE"])),(l()(),t.wb(26,0,null,null,3,"div",[["class","brand-card-body"]],null,null,null,null,null)),(l()(),t.wb(27,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.wb(28,0,null,null,1,"div",[["class","text-uppercase text-muted small"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Status when vehicle is IDLE"])),(l()(),t.wb(30,0,null,null,11,"div",[["class","col-sm-6 col-lg-3"]],null,null,null,null,null)),(l()(),t.wb(31,0,null,null,10,"div",[["class","brand-card"]],null,null,null,null,null)),(l()(),t.wb(32,0,null,null,5,"div",[["class","card-body pb-3 bg-danger"]],null,null,null,null,null)),(l()(),t.wb(33,0,null,null,1,"div",[["class","btn-group float-right"]],null,null,null,null,null)),(l()(),t.wb(34,0,null,null,0,"i",[["class","fa fa-car fa-2x"]],null,null,null,null,null)),(l()(),t.wb(35,0,null,null,0,"div",[["class","text-value"],["id","getStop"]],null,null,null,null,null)),(l()(),t.wb(36,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["STOP"])),(l()(),t.wb(38,0,null,null,3,"div",[["class","brand-card-body"]],null,null,null,null,null)),(l()(),t.wb(39,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.wb(40,0,null,null,1,"div",[["class","text-uppercase text-muted small"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Status when vehicle is OFF"])),(l()(),t.wb(42,0,null,null,11,"div",[["class","col-sm-6 col-lg-3"]],null,null,null,null,null)),(l()(),t.wb(43,0,null,null,10,"div",[["class","brand-card"]],null,null,null,null,null)),(l()(),t.wb(44,0,null,null,5,"div",[["class","card-body pb-3 bg-dark"]],null,null,null,null,null)),(l()(),t.wb(45,0,null,null,1,"div",[["class","btn-group float-right"]],null,null,null,null,null)),(l()(),t.wb(46,0,null,null,0,"i",[["class","fa fa-car fa-2x"]],null,null,null,null,null)),(l()(),t.wb(47,0,null,null,0,"div",[["class","text-value"],["id","getDown"]],null,null,null,null,null)),(l()(),t.wb(48,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["DOWN"])),(l()(),t.wb(50,0,null,null,3,"div",[["class","brand-card-body"]],null,null,null,null,null)),(l()(),t.wb(51,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.wb(52,0,null,null,1,"div",[["class","text-uppercase text-muted small"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Down for more than 24 hours"])),(l()(),t.wb(54,0,null,null,33,"div",[["class","card"]],null,null,null,null,null)),(l()(),t.wb(55,0,null,null,4,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),t.wb(56,0,null,null,1,"span",[["class","font-weight-bold"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Vehicles:\xa0"])),(l()(),t.wb(58,0,null,null,0,"span",[["id","total-vehicles"]],null,null,null,null,null)),(l()(),t.wb(59,0,null,null,0,"span",[["class","float-right"],["id","coordinates-panel"]],null,null,null,null,null)),(l()(),t.wb(60,0,null,null,5,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.wb(61,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.wb(62,0,null,null,3,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t.wb(63,0,null,null,0,"div",[["id","map-canvas"],["style","height:600px;"]],null,null,null,null,null)),(l()(),t.wb(64,0,null,null,1,"div",[["id","panel"]],null,null,null,null,null)),(l()(),t.wb(65,0,null,null,0,"div",[["id","color-palette"]],null,null,null,null,null)),(l()(),t.wb(66,0,null,null,21,"div",[["class","card-footer"]],null,null,null,null,null)),(l()(),t.wb(67,0,null,null,20,"div",[["class","row text-center"]],null,null,null,null,null)),(l()(),t.wb(68,0,null,null,4,"div",[["class","col-sm-12 col-md mb-sm-2 mb-0"]],null,null,null,null,null)),(l()(),t.wb(69,0,null,null,1,"div",[["class","text-muted"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Smooth Traffic"])),(l()(),t.wb(71,0,null,null,1,"div",[["class","progress progress-xs mt-2"]],null,null,null,null,null)),(l()(),t.wb(72,0,null,null,0,"div",[["aria-valuemax","100"],["aria-valuemin","100"],["aria-valuenow","100"],["class","progress-bar bg-success"],["role","progressbar"],["style","width: 100%"]],null,null,null,null,null)),(l()(),t.wb(73,0,null,null,4,"div",[["class","col-sm-12 col-md mb-sm-2 mb-0"]],null,null,null,null,null)),(l()(),t.wb(74,0,null,null,1,"div",[["class","text-muted"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Slow Moving Traffic"])),(l()(),t.wb(76,0,null,null,1,"div",[["class","progress progress-xs mt-2"]],null,null,null,null,null)),(l()(),t.wb(77,0,null,null,0,"div",[["aria-valuemax","100"],["aria-valuemin","100"],["aria-valuenow","100"],["class","progress-bar bg-warning"],["role","progressbar"],["style","width: 100%"]],null,null,null,null,null)),(l()(),t.wb(78,0,null,null,4,"div",[["class","col-sm-12 col-md mb-sm-2 mb-0"]],null,null,null,null,null)),(l()(),t.wb(79,0,null,null,1,"div",[["class","text-muted"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Heavy Traffic"])),(l()(),t.wb(81,0,null,null,1,"div",[["class","progress progress-xs mt-2"]],null,null,null,null,null)),(l()(),t.wb(82,0,null,null,0,"div",[["aria-valuemax","100"],["aria-valuemin","100"],["aria-valuenow","100"],["class","progress-bar bg-danger"],["role","progressbar"],["style","width: 100%"]],null,null,null,null,null)),(l()(),t.wb(83,0,null,null,4,"div",[["class","col-sm-12 col-md mb-sm-2 mb-0"]],null,null,null,null,null)),(l()(),t.wb(84,0,null,null,1,"div",[["class","text-muted"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["No Data Available"])),(l()(),t.wb(86,0,null,null,1,"div",[["class","progress progress-xs mt-2"]],null,null,null,null,null)),(l()(),t.wb(87,0,null,null,0,"div",[["aria-valuemax","100"],["aria-valuemin","100"],["aria-valuenow","100"],["class","progress-bar bg-gray-dark"],["role","progressbar"],["style","width: 100%"]],null,null,null,null,null)),(l()(),t.wb(88,0,null,null,29,"div",[["class","card"]],null,null,null,null,null)),(l()(),t.wb(89,0,null,null,28,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.wb(90,0,null,null,27,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.wb(91,0,null,null,26,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t.wb(92,0,null,null,25,"table",[["class","table table-responsive-sm table-hover table-outline mb-0 info-table"],["id","assetList"]],null,null,null,null,null)),(l()(),t.wb(93,0,null,null,23,"thead",[["class","thead-dark"]],null,null,null,null,null)),(l()(),t.wb(94,0,null,null,22,"tr",[],null,null,null,null,null)),(l()(),t.wb(95,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["ID"])),(l()(),t.wb(97,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Name"])),(l()(),t.wb(99,0,null,null,1,"th",[["class","text-center"],["width","25%"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Address"])),(l()(),t.wb(101,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Date"])),(l()(),t.wb(103,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Last Updated"])),(l()(),t.wb(105,0,null,null,1,"th",[["class","text-center"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Speed"])),(l()(),t.wb(107,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Driver"])),(l()(),t.wb(109,0,null,null,1,"th",[["class","text-center"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Fix"])),(l()(),t.wb(111,0,null,null,1,"th",[["class","text-center"],["width","70"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Engine"])),(l()(),t.wb(113,0,null,null,1,"th",[["class","text-center"],["width","50"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["GPS"])),(l()(),t.wb(115,0,null,null,1,"th",[["class","text-center"],["width","78"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Network"])),(l()(),t.wb(117,0,null,null,0,"tbody",[["id","assetStatus"]],null,null,null,null,null)),(l()(),t.wb(118,0,null,null,10,"div",[["aria-hidden","true"],["aria-labelledby","trackingModalLabel"],["class","modal fade"],["id","trackingModal"],["role","dialog"],["tabindex","-1"]],null,null,null,null,null)),(l()(),t.wb(119,0,null,null,9,"div",[["class","modal-dialog modal-lg modal-dialog-centered"],["role","document"]],null,null,null,null,null)),(l()(),t.wb(120,0,null,null,8,"div",[["class","modal-content"]],null,null,null,null,null)),(l()(),t.wb(121,0,null,null,4,"div",[["class","modal-header"]],null,null,null,null,null)),(l()(),t.wb(122,0,null,null,0,"h4",[["class","modal-title"],["id","trackingFormTitle"]],null,null,null,null,null)),(l()(),t.wb(123,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(l()(),t.wb(124,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["\xd7"])),(l()(),t.wb(126,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),t.wb(127,0,null,null,1,"div",[["class","col-md-12"]],null,null,null,null,null)),(l()(),t.wb(128,0,null,null,0,"div",[["id","map-asset"],["style","height:600px;"]],null,null,null,null,null))],(function(l,n){l(n,1,0,"rgba(51, 51, 51, 0.96)","medium","ball-spin-clockwise")}),null)}function L(l){return t.Yb(0,[(l()(),t.wb(0,0,null,null,1,"ng-component",[],null,null,null,x,M)),t.vb(1,114688,null,0,y,[p.a,m.i,b.l,r.c],null,null)],(function(l,n){l(n,1,0)}),null)}var I=t.sb("ng-component",y,L,{},{},[]),k=e("gIcY"),D=function(){function l(l,n,e,t){var o=this;this._constant=l,this.router=e,this.spinner=t,this.router.events.subscribe((function(l){""!=n.path()&&(o.route=n.path())}))}return l.prototype.ngOnInit=function(){this.spinner.show();var l,n=null,e=null,t={path:"M17.402,0H5.643C2.526,0,0,3.467,0,6.584v34.804c0,3.116,2.526,5.644,5.643,5.644h11.759c3.116,0,5.644-2.527,5.644-5.644 V6.584C23.044,3.467,20.518,0,17.402,0z M22.057,14.188v11.665l-2.729,0.351v-4.806L22.057,14.188z M20.625,10.773 c-1.016,3.9-2.219,8.51-2.219,8.51H4.638l-2.222-8.51C2.417,10.773,11.3,7.755,20.625,10.773z M3.748,21.713v4.492l-2.73-0.349 V14.502L3.748,21.713z M1.018,37.938V27.579l2.73,0.343v8.196L1.018,37.938z M2.575,40.882l2.218-3.336h13.771l2.219,3.336H2.575z M19.328,35.805v-7.872l2.729-0.355v10.048L19.328,35.805z",scale:.5,fillOpacity:1,fillColor:"yellow",offset:"5%",anchor:new google.maps.Point(10,25)},o=new Object,a=new Object,s=new google.maps.DirectionsService,i=new google.maps.DirectionsRenderer({map:h}),r=new google.maps.Polyline({path:[],strokeColor:"#FF0000",strokeWeight:3}),p=new google.maps.Polyline({path:[],strokeColor:"#FF0000",strokeWeight:3}),c=new google.maps.LatLng(1.3521,103.8198);for(var d in google.maps.MapTypeId)this._constant.mapTypeIds.push(google.maps.MapTypeId[d]);var g,m,b,f={zoom:12,center:c,panControl:!1,zoomControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},mapTypeControl:!1,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,mapTypeIds:this._constant.mapTypeIds,position:google.maps.ControlPosition.TOP_LEFT},streetViewControl:!1,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},fullscreenControl:!0,fullscreenControlOptions:{position:google.maps.ControlPosition.TOP_LEFT},scaleControl:!1,overviewMapControl:!1},h=new google.maps.Map(document.getElementById("map-canvas"),f);function v(l,n){var e;return 0==l?e=1:l>0&&l+1<n?e=2:l+1==n&&(e=3),e}g=new google.maps.LatLngBounds(new google.maps.LatLng(1.3,103.8),new google.maps.LatLng(1.3,103.571)),m=document.getElementById("start"),b={bounds:g,types:$("#autocomplete").val(),componentRestrictions:{country:"SG"}},new google.maps.places.Autocomplete(m,b).setTypes(),function(){var l=new google.maps.LatLngBounds(new google.maps.LatLng(1.3,103.8),new google.maps.LatLng(1.3,103.571)),n=document.getElementById("end"),e={bounds:l,types:$("#autocomplete").val(),componentRestrictions:{country:"SG"}};new google.maps.places.Autocomplete(n,e).setTypes()}(),$("#calcRoute").on("click",{spinner:this.spinner},(function(c){if(c.preventDefault(),c.data.spinner.show(),0==$("#start").val().length||0==$("#end").val().length)alert("Start/End must not be empty");else{n&&clearTimeout(n),e&&e.setMap(null),r.setMap(null),p.setMap(null),i.setMap(null),r=new google.maps.Polyline({path:[],strokeColor:"#FF0000",strokeWeight:3}),p=new google.maps.Polyline({path:[],strokeColor:"#FF0000",strokeWeight:3}),i=new google.maps.DirectionsRenderer({map:h});var d={origin:$("#start").val(),destination:$("#end").val(),travelMode:google.maps.DirectionsTravelMode.DRIVING,optimizeWaypoints:!0,provideRouteAlternatives:!1,avoidTolls:1==$("#tolls").prop("checked"),avoidHighways:1==$("#highways").prop("checked"),drivingOptions:{departureTime:new Date(Date.now()),trafficModel:$("#traffic_mode").val()}};s.route(d,(function(s,c){if(c==google.maps.DirectionsStatus.OK){document.getElementById("directions-result")&&(i.setMap(null),i.setPanel(null),document.getElementById("directions-result").innerHTML=""),i.setDirections(s),i.setMap(h),i.setPanel(document.getElementById("directions-result"));var d=s.routes[0],g=document.getElementById("directions-panel");g.innerHTML="";var m="<div style='border-style: none; margin: 0px; padding: 0px 3px; overflow: auto;' class=''><table id='resultsTable' class='table table-bordered' cellspacing='0' width='100%'><thead><tr><th style='color: blue;'>SN</th><th style='color: blue;'>Segment</th><th style='color: blue;'>Location From</th><th style='color: blue;'>Location To</th><th style='color: blue;'>Duration</th><th style='color: blue;'>Distance</th><th style='color: blue;'>Service Time</th><th style='color: blue;'>Arrival at waypoint</th><th style='color: blue;'>Departure at waypoint</th><th style='color: blue;'>Waypoint Status</th></tr></thead><tbody>",b=$("#gen_svc_duration").val(),f=$("#start_time").val(),w=u(f,"HH:mm"),y=u(w).format("HH"),M=u(w).format("mm"),x=0,L=0,I=new Date;I.setHours(y),I.setMinutes(M),I.setSeconds(0);for(var k=new google.maps.LatLngBounds,D=[],C=s.routes[0].legs,P=0;P<C.length;P++){0===P&&(o.latlng=C[P].start_location,o.address=C[P].start_address),a.latlng=C[P].end_location,a.address=C[P].end_address;for(var T=C[P].steps,S=0;S<T.length;S++)for(var O=T[S].path,z=0;z<O.length;z++)r.getPath().push(O[z]),k.extend(O[z]);var E=P+1;L+=C[P].duration.value,x+=C[P].distance.value;var V,A,N=new Date;switch(N.setHours(I.getHours()),N.setMinutes(I.getMinutes()),N.setSeconds(I.getSeconds()),N.setSeconds(I.getSeconds()+L),P){case 0:var Y="A to B";break;case 1:Y="B to C";break;case 2:Y="C to D";break;case 3:Y="D to E";break;case 4:Y="E to F";break;case 5:Y="F to G";break;case 6:Y="G to H";break;case 7:Y="H to I";break;case 8:Y="I to J";break;case 9:Y="J to K";break;case 10:Y="K to L";break;case 11:Y="L to M";break;case 12:Y="M to N";break;case 13:Y="N to O";break;case 14:Y="O to P";break;case 15:Y="P to Q";break;case 16:Y="Q to R";break;case 17:Y="R to S";break;case 18:Y="S to T";break;case 19:Y="T to U";break;case 20:Y="U to V";break;case 21:Y="V to W";break;case 22:Y="W to X";break;case 23:Y="X to Y";break;case 24:Y="Y to Z";break;default:Y=""}if(0==P)V=u(N).format("HH:mm"),A=u(N).add(b,"m").format("HH:mm"),D.push(b);else{if(b){V=u(N).add(b*E-parseInt(b),"m").format("HH:mm");var B=parseInt(b)+parseInt(D[0]);(D=[]).push(B)}else V=u(N).add(D[0],"m").format("HH:mm"),D=[];b&&(A=u(N).add(b*E,"m").format("HH:mm"))}g.innerHTML+="<b>Route Segment: "+E+" ("+Y+")</b><br>",g.innerHTML+="Location: "+d.legs[P].start_address+" to ",g.innerHTML+=d.legs[P].end_address+"<br>",g.innerHTML+="Duration: "+d.legs[P].duration.text+"<br>",g.innerHTML+="Distance: "+d.legs[P].distance.text+"<br>",d.legs[P].duration_in_traffic&&(g.innerHTML+="Traffic Duration: "+d.legs[P].duration_in_traffic.text),g.innerHTML+=" <hr>";var F=d.legs[P].distance.text;m+="<tr><td style='padding: 5px;'>"+(P+1)+"</td><td style='padding: 5px;'>Route Segment&nbsp;"+E+" ("+Y+")</td><td style='padding: 5px;'>"+d.legs[P].start_address+"</td><td style='padding: 5px;'>"+d.legs[P].end_address+"</td><td style='padding: 5px;'>"+d.legs[P].duration.text.replace(/[^\d.-]/g,"")+"</td><td style='padding: 5px;'>"+F.replace(/[^\d.-]/g,"")+"</td><td style='padding: 5px;'>"+b+"</td><td style='padding: 5px;'>"+V+"</td><td style='padding: 5px;'>"+A+"</td><td style='padding: 5px;'>"+v(P,C.length)+"</td></tr>",P+1==C.length&&(void 0===(m+="</tbody></table></div>")&&null===m||$("#results-panel").html(m))}x/=1e3,document.getElementById("total").innerHTML="<div style='margin-top:10px;'><strong>Total Distance:&nbsp;</strong><span id='total_distance'></span>&nbsp;km<br><strong>Total Driving Time:&nbsp;</strong><span id='total_journey'></span>&nbsp;minutes<br>",$("#total_distance").text(x),$("#total_journey").text((L/60).toFixed(2)),$("#total_svc").text(D[0]),$("#end_time").text(u(N).add(D[0],"m").format("HH:mm")),r.setMap(h),h.fitBounds(k),h.setZoom(18),l=r.Distance(),h.setCenter(r.getPath().getAt(0)),e=new google.maps.Marker({position:r.getPath().getAt(0),map:h,icon:t}),p=new google.maps.Polyline({path:[r.getPath().getAt(0)],strokeColor:"#0000FF",strokeWeight:10}),setTimeout((function(){!function o(s){if(s>l)e.setPosition(a.latlng);else{var i=r.GetPointAtDistance(s),u=e.getPosition();e.setPosition(i);var c=google.maps.geometry.spherical.computeHeading(u,i);t.rotation=c,e.setIcon(t),function(l){p.getPath().getLength()>20&&(p=new google.maps.Polyline([r.getPath().getAt(0)])),r.GetIndexAtDistance(l)<3?(p.getPath().getLength()>1&&p.getPath().removeAt(p.getPath().getLength()-1),p.getPath().insertAt(p.getPath().getLength(),r.GetPointAtDistance(l))):p.getPath().insertAt(p.getPath().getLength(),a.latlng)}(s),n=setTimeout((function(){o(s+50)}),100)}}(50)}),2e3)}}))}c.data.spinner.hide()})),google.maps.LatLng.prototype.distanceFrom=function(l){var n=this.lat(),e=this.lng(),t=l.lat(),o=l.lng(),a=(t-n)*Math.PI/180,s=(o-e)*Math.PI/180,i=Math.sin(a/2)*Math.sin(a/2)+Math.cos(n*Math.PI/180)*Math.cos(t*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6378137},google.maps.LatLng.prototype.latRadians=function(){return this.lat()*Math.PI/180},google.maps.LatLng.prototype.lngRadians=function(){return this.lng()*Math.PI/180},google.maps.Polygon.prototype.Distance=function(){for(var l=0,n=1;n<this.getPath().getLength();n++)l+=this.getPath().getAt(n).distanceFrom(this.getPath().getAt(n-1));return l},google.maps.Polygon.prototype.GetPointAtDistance=function(l){if(0==l)return this.getPath().getAt(0);if(l<0)return null;if(this.getPath().getLength()<2)return null;for(var n=0,e=0,t=1;t<this.getPath().getLength()&&n<l;t++)e=n,n+=this.getPath().getAt(t).distanceFrom(this.getPath().getAt(t-1));if(n<l)return null;var o=this.getPath().getAt(t-2),a=this.getPath().getAt(t-1),s=(l-e)/(n-e);return new google.maps.LatLng(o.lat()+(a.lat()-o.lat())*s,o.lng()+(a.lng()-o.lng())*s)},google.maps.Polygon.prototype.GetPointsAtDistance=function(l){var n=l,e=[];if(l<=0)return e;for(var t=0,o=0,a=1;a<this.getPath().getLength();a++)for(o=t,t+=this.getPath().getAt(a).distanceFrom(this.getPath().getAt(a-1));t>n;){var s=this.getPath().getAt(a-1),i=this.getPath().getAt(a),r=(n-o)/(t-o);e.push(new google.maps.LatLng(s.lat()+(i.lat()-s.lat())*r,s.lng()+(i.lng()-s.lng())*r)),n+=l}return e},google.maps.Polygon.prototype.GetIndexAtDistance=function(l){if(0==l)return this.getPath().getAt(0);if(l<0)return null;for(var n=0,e=1;e<this.getPath().getLength()&&n<l;e++)n+=this.getPath().getAt(e).distanceFrom(this.getPath().getAt(e-1));return n<l?null:e},google.maps.Polyline.prototype.Distance=google.maps.Polygon.prototype.Distance,google.maps.Polyline.prototype.GetPointAtDistance=google.maps.Polygon.prototype.GetPointAtDistance,google.maps.Polyline.prototype.GetPointsAtDistance=google.maps.Polygon.prototype.GetPointsAtDistance,google.maps.Polyline.prototype.GetIndexAtDistance=google.maps.Polygon.prototype.GetIndexAtDistance,$(".selectpicker").selectpicker("refresh"),this.spinner.hide()},l.prototype.calcRoute=function(){},l}(),C=t.ub({encapsulation:2,styles:[["#map-canvas{position:relative;margin:0 auto;padding:0;overflow:hidden;max-width:none!important;box-shadow:none!important}#directions-panel{height:340px}#directions-panel,#directions-result{margin-top:10px;background-color:azure;padding:10px;overflow-y:scroll;overflow-x:hidden}#directions-result{height:460px}#total-panel{background-color:azure;padding:5px;overflow-y:hidden;overflow-x:hidden;height:120px}"]],data:{}});function P(l){return t.Yb(0,[(l()(),t.wb(0,0,null,null,3,"ngx-spinner",[["bdColor","rgba(51, 51, 51, 0.96)"],["size","medium"],["type","ball-spin-clockwise"]],null,null,null,i.b,i.a)),t.vb(1,770048,null,0,r.a,[r.c,t.h],{bdColor:[0,"bdColor"],size:[1,"size"],type:[2,"type"]},null),(l()(),t.wb(2,0,null,0,1,"p",[["style","color: white"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Please Wait. "])),(l()(),t.wb(4,0,null,null,91,"div",[["class","animated fadeIn"]],null,null,null,null,null)),(l()(),t.wb(5,0,null,null,74,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.wb(6,0,null,null,64,"div",[["class","col-sm-6"]],null,null,null,null,null)),(l()(),t.wb(7,0,null,null,63,"div",[["class","card"]],null,null,null,null,null)),(l()(),t.wb(8,0,null,null,2,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),t.wb(9,0,null,null,1,"span",[["class","font-weight-bold"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Settings"])),(l()(),t.wb(11,0,null,null,59,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.wb(12,0,null,null,58,"div",[["style","height:470px;"]],null,null,null,null,null)),(l()(),t.wb(13,0,null,null,15,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.wb(14,0,null,null,12,"select",[["class","selectpicker form-control show-tick"],["data-dropup-auto","false"],["data-table","searchable"],["data-width","100%"],["id","autocomplete"],["name","autocomplete"]],null,null,null,null,null)),(l()(),t.wb(15,0,null,null,3,"option",[["value","['establishment']"]],null,null,null,null,null)),t.vb(16,147456,null,0,k.m,[t.l,t.D,[8,null]],{value:[0,"value"]},null),t.vb(17,147456,null,0,k.q,[t.l,t.D,[8,null]],{value:[0,"value"]},null),(l()(),t.Vb(-1,null,["Establishment"])),(l()(),t.wb(19,0,null,null,3,"option",[["selected","selected"],["value","['address']"]],null,null,null,null,null)),t.vb(20,147456,null,0,k.m,[t.l,t.D,[8,null]],{value:[0,"value"]},null),t.vb(21,147456,null,0,k.q,[t.l,t.D,[8,null]],{value:[0,"value"]},null),(l()(),t.Vb(-1,null,["Address"])),(l()(),t.wb(23,0,null,null,3,"option",[["value","['(regions)']"]],null,null,null,null,null)),t.vb(24,147456,null,0,k.m,[t.l,t.D,[8,null]],{value:[0,"value"]},null),t.vb(25,147456,null,0,k.q,[t.l,t.D,[8,null]],{value:[0,"value"]},null),(l()(),t.Vb(-1,null,["Postal Code"])),(l()(),t.wb(27,0,null,null,1,"small",[["class","text-muted"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Search by"])),(l()(),t.wb(29,0,null,null,15,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.wb(30,0,null,null,12,"select",[["class","selectpicker form-control show-tick"],["data-dropup-auto","true"],["data-width","100%"],["id","traffic_mode"],["name","traffic_mode"],["required",""]],null,null,null,null,null)),(l()(),t.wb(31,0,null,null,3,"option",[["selected","selected"],["value","bestguess"]],null,null,null,null,null)),t.vb(32,147456,null,0,k.m,[t.l,t.D,[8,null]],{value:[0,"value"]},null),t.vb(33,147456,null,0,k.q,[t.l,t.D,[8,null]],{value:[0,"value"]},null),(l()(),t.Vb(-1,null,["Best"])),(l()(),t.wb(35,0,null,null,3,"option",[["value","pessimistic"]],null,null,null,null,null)),t.vb(36,147456,null,0,k.m,[t.l,t.D,[8,null]],{value:[0,"value"]},null),t.vb(37,147456,null,0,k.q,[t.l,t.D,[8,null]],{value:[0,"value"]},null),(l()(),t.Vb(-1,null,["Pessimistic"])),(l()(),t.wb(39,0,null,null,3,"option",[["value","optimistic"]],null,null,null,null,null)),t.vb(40,147456,null,0,k.m,[t.l,t.D,[8,null]],{value:[0,"value"]},null),t.vb(41,147456,null,0,k.q,[t.l,t.D,[8,null]],{value:[0,"value"]},null),(l()(),t.Vb(-1,null,["Optimistic"])),(l()(),t.wb(43,0,null,null,1,"small",[["class","text-muted"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Traffic Model"])),(l()(),t.wb(45,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.wb(46,0,null,null,1,"label",[["for",""]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Avoid Highways"])),(l()(),t.wb(48,0,null,null,3,"span",[["class","form-group pull-right"]],null,null,null,null,null)),(l()(),t.wb(49,0,null,null,2,"label",[["class","switch switch-label switch-pill switch-primary"],["style","margin: 4px 0 0 0;"]],null,null,null,null,null)),(l()(),t.wb(50,0,null,null,0,"input",[["checked",""],["class","highwayStatus switch-input"],["data-switchery","true"],["id","highways"],["name","highways"],["type","checkbox"]],null,null,null,null,null)),(l()(),t.wb(51,0,null,null,0,"span",[["class","switch-slider"],["data-checked","On"],["data-unchecked","Off"]],null,null,null,null,null)),(l()(),t.wb(52,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null)),(l()(),t.wb(53,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.wb(54,0,null,null,1,"label",[["for",""]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Avoid Toll Gate"])),(l()(),t.wb(56,0,null,null,3,"span",[["class","form-group pull-right"]],null,null,null,null,null)),(l()(),t.wb(57,0,null,null,2,"label",[["class","switch switch-label switch-pill switch-primary"],["style","margin: 4px 0 0 0;"]],null,null,null,null,null)),(l()(),t.wb(58,0,null,null,0,"input",[["checked",""],["class","tollStatus switch-input"],["data-switchery","true"],["id","tolls"],["name","tolls"],["type","checkbox"]],null,null,null,null,null)),(l()(),t.wb(59,0,null,null,0,"span",[["class","switch-slider"],["data-checked","On"],["data-unchecked","Off"]],null,null,null,null,null)),(l()(),t.wb(60,0,null,null,3,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.wb(61,0,null,null,1,"label",[["for","start"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Start"])),(l()(),t.wb(63,0,null,null,0,"input",[["class","form-control"],["id","start"],["placeholder","Enter an origin location"],["required",""],["type","search"]],null,null,null,null,null)),(l()(),t.wb(64,0,null,null,3,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.wb(65,0,null,null,1,"label",[["for","end"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["End"])),(l()(),t.wb(67,0,null,null,0,"input",[["class","form-control"],["id","end"],["placeholder","Enter a destination location"],["required",""],["type","search"]],null,null,null,null,null)),(l()(),t.wb(68,0,null,null,2,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.wb(69,0,null,null,1,"button",[["class","text text-thin btn btn-lg btn-success pull-right"],["id","calcRoute"],["type","submit"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Search"])),(l()(),t.wb(71,0,null,null,8,"div",[["class","col-sm-6"]],null,null,null,null,null)),(l()(),t.wb(72,0,null,null,7,"div",[["class","card"]],null,null,null,null,null)),(l()(),t.wb(73,0,null,null,2,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),t.wb(74,0,null,null,1,"span",[["class","font-weight-bold"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Results\xa0"])),(l()(),t.wb(76,0,null,null,3,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.wb(77,0,null,null,0,"div",[["class","form-control"],["data-by-field","directions-panel"],["id","directions-panel"],["name","directions-panel"],["placeholder","Results"]],null,null,null,null,null)),(l()(),t.wb(78,0,null,null,1,"div",[["id","total-panel"],["style","color:black;"]],null,null,null,null,null)),(l()(),t.wb(79,0,null,null,0,"span",[["id","total"]],null,null,null,null,null)),(l()(),t.wb(80,0,null,null,15,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.wb(81,0,null,null,7,"div",[["class","col-sm-6"]],null,null,null,null,null)),(l()(),t.wb(82,0,null,null,6,"div",[["class","card"]],null,null,null,null,null)),(l()(),t.wb(83,0,null,null,3,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),t.wb(84,0,null,null,1,"span",[["class","font-weight-bold"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Maps\xa0"])),(l()(),t.wb(86,0,null,null,0,"span",[["class","float-right"],["id","coordinates-panel"]],null,null,null,null,null)),(l()(),t.wb(87,0,null,null,1,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.wb(88,0,null,null,0,"div",[["id","map-canvas"],["style","height:470px;"]],null,null,null,null,null)),(l()(),t.wb(89,0,null,null,6,"div",[["class","col-sm-6"]],null,null,null,null,null)),(l()(),t.wb(90,0,null,null,5,"div",[["class","card"]],null,null,null,null,null)),(l()(),t.wb(91,0,null,null,2,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),t.wb(92,0,null,null,1,"span",[["class","font-weight-bold"]],null,null,null,null,null)),(l()(),t.Vb(-1,null,["Directions\xa0"])),(l()(),t.wb(94,0,null,null,1,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.wb(95,0,null,null,0,"div",[["class","form-control"],["id","directions-result"],["placeholder","Results"]],null,null,null,null,null))],(function(l,n){l(n,1,0,"rgba(51, 51, 51, 0.96)","medium","ball-spin-clockwise"),l(n,16,0,"['establishment']"),l(n,17,0,"['establishment']"),l(n,20,0,"['address']"),l(n,21,0,"['address']"),l(n,24,0,"['(regions)']"),l(n,25,0,"['(regions)']"),l(n,32,0,"bestguess"),l(n,33,0,"bestguess"),l(n,36,0,"pessimistic"),l(n,37,0,"pessimistic"),l(n,40,0,"optimistic"),l(n,41,0,"optimistic")}),null)}function T(l){return t.Yb(0,[(l()(),t.wb(0,0,null,null,1,"ng-component",[],null,null,null,P,C)),t.vb(1,114688,null,0,D,[p.a,m.i,b.l,r.c],null,null)],(function(l,n){l(n,1,0)}),null)}var S=t.sb("ng-component",D,T,{},{},[]),O=e("8e6m"),z=e("Zseb"),E=e("xtZt"),V=e("9EwZ"),A={title:"Standard Vehicle Routing Problem"},N={title:"Travelling Salesman Problem"},Y={title:"Directions"},B=function(){return function(){}}(),F=e("axVG");e.d(n,"VrpModuleNgFactory",(function(){return _}));var _=t.tb(o,[],(function(l){return t.Ib([t.Jb(512,t.j,t.X,[[8,[a.a,s.a,w,I,S]],[3,t.j],t.x]),t.Jb(4608,m.o,m.n,[t.u]),t.Jb(4608,k.p,k.p,[]),t.Jb(4608,O.b,O.b,[]),t.Jb(1073742336,m.c,m.c,[]),t.Jb(1073742336,k.o,k.o,[]),t.Jb(1073742336,k.e,k.e,[]),t.Jb(1073742336,z.b,z.b,[]),t.Jb(1073742336,E.e,E.e,[]),t.Jb(1073742336,V.a,V.a,[]),t.Jb(1073742336,b.p,b.p,[[2,b.u],[2,b.l]]),t.Jb(1073742336,B,B,[]),t.Jb(1073742336,F.a,F.a,[]),t.Jb(1073742336,O.c,O.c,[]),t.Jb(1073742336,r.b,r.b,[]),t.Jb(1073742336,o,o,[]),t.Jb(1024,b.j,(function(){return[[{path:"",component:g,data:A},{path:"tsp",component:y,data:N},{path:"direction",component:D,data:Y}]]}),[])])}))},axVG:function(l,n,e){"use strict";e.d(n,"a",(function(){return t}));var t=function(){function l(){}var n;return n=l,l.forRoot=function(){return{ngModule:n}},l}()}}]);